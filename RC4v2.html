<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=0.8, maximum-scale=1, minimum-scale=0.5, user-scalable=no, target-densityDpi=device-dpi" />
		<link rel='stylesheet' type='text/css' href='style_v2.css' />
		<title>RC4</title>
		<!---<script src="https://www.kirupa.com/js/prefixfree.min.js"></script> --->
		<script src="jquery-3.3.1.min.js"></script>
		<script src="jquery.color.js"></script>
		<script src="jquery.animateNumber.min.js"></script>
		<script type = "text/javascript">
			var defaultkey = "81"   
			// e.g.: <div class="vbox"><div class="velement">0</div><div>S<span class="sub">0</span></div></div>
			var s1 = '<div class="vbox"><div class="velement">' ;
			var s2 = '</div><div>K<span class="sub">' ;
			var s3 = '</span></div></div>' ;
			var li = '<li>' ;
			var liend = '</li>' ;
			var divclear = '<div class="clear"> </div>' ;


			// need to handle case: undefined key value
			function fillt(element, hasID){         // boolean hasID
				s01 = '<div class="vbox" id="stage2T' ;
				s02 = '"><div class="velement">' ;
				s1 = '<div class="vbox"><div class="velement">' ;
				s2 = '</div><div>T<span class="sub">' ;
				var keyvalue = document.getElementById("keyvalue").value ;
				if (keyvalue==0) {keyvalue = defaultkey;}
				keyvalue = keyvalue.toString() ;
				var keylen = keyvalue.length ;
				if ( keylen == 0)
		  			{ return ""; }
				var keyindex = 0 ;
				var tvector ='' ;
				for (i=0 ; i<256 ; i++) {
						keyindex = i % keylen ;
					 	var keyelement = keyvalue[keyindex] ;
					 	if(hasID){ var selement = s01 + i.toString() + s02 + keyelement + s2 + i.toString() + s3 ; }
					 	else { var selement = s1 + keyelement + s2 + i.toString() + s3 ; }
				 		if ( i == 3 ) { tvector = tvector + '<div class="hscroll hscrollT"><ul>' ; }
				 		if ( i == 253 ) { tvector = tvector + '</ul></div>' ; }
				 		if ( (i > 2) & (i < 253 ) ) {	selement = li + selement + liend ; }
				 		tvector = tvector + selement ;
			 		}
			 	document.getElementById(element).innerHTML = tvector + divclear ;

			}

			function stage3updateS(){
				var stage2S = "stage2S";  // id of vector S elements in stage 2
				var stage3S = "stage3S";
				var sivalue = "";
				var svector = [];
				var stage3Sel = document.getElementById(stage2S+0);
				for ( i=0; i<256; i++){
					sivalue = document.getElementById(stage2S + i).firstChild.textContent;
					svector[i] = sivalue;
					}
				for ( j=0; j<256; j++){
					stage3Sel = document.getElementById(stage3S + j ).firstChild;
					stage3Sel.innerHTML = svector[j];
					}
				}

		</script>

	</head>

	<body>

		<div id="sectionM">		
			<h1>RC4</h1>
			<p>RC4 is a stream cipher designed for RSA Security and named after its designer Ron Rivest. Its algorithm uses a key of adjustable length (range of length is from 1 to 256 bytes), and produces pseudo-random bytes through a random permutation. The period of this cipher has been estimated to be above 10<a class="super">100</a>.  RC4 is remarkably simple and runs very quickly in software. Due to its simplicity and high speed, it has become widely-used in many applications, such as Wi-Fi Protected Access (WPA) and Kerberos. </p>
			<p>There are three stages in RC4: Initiation of S, Initial Permutation of S and Stream Generation. The first stage initializes a state vector S, with elements S[0], S[1], ..., S[255]; and initializes a temporary vector T with the variable-length key. The second stage permutes vector S according to vector T. The third stage generates a byte k by selecting one element from the 255 elements of S. Afterwards S is permutated once so that the next round of k-selection uses a different S.</p>

			
			<h2>General Flow of RC4:</h2>
			<div>			
				<div class="flowbox">Stage 1<br>Initialization of state vector S, temporary vector T, and key K</div>
				<div class="arrowbox"><img src="arrowblue2.png"></div>
				<div class="flowbox">Stage 2<br>Initial permutation of state vector S</div>
				<div class="arrowbox"><img src="arrowblue2.png"></div>
				<div class="flowbox">Stage 3<br>Pseudorandom byte stream generation</div>
			</div>
		</div>

		<div id="blankspace">--</div>   <!--- leave blank space between two sections--->
		<div id="blankspace">--</div>

		<div id="section1">

			<h1>Initialization of state vector S, temporary vetor T, and key K</h1>

			<div class="gridcontainer0">
				<div class="gridcol1">
					<p>State vector S:</p>
					<div>
						<div class="vbox"><div class="velement">0</div><div>S<span class="sub">0</span></div></div>
						<div class="vbox"><div class="velement">1</div><div>S<span class="sub">1</span></div></div>
						<div class="vbox"><div class="velement">2</div><div>S<span class="sub">2</span></div></div>
						<div class="hscroll">
							<ul>
								<li><div class="vbox"><div class="velement">3</div><div>S<span class="sub">3</span></div></div></li>
								<li><div class="vbox"><div class="velement">4</div><div>S<span class="sub">4</span></div></div></li>
								<li><div class="vbox"><div class="velement">5</div><div>S<span class="sub">5</span></div></div></li>
								<li><div class="vbox"><div class="velement">6</div><div>S<span class="sub">6</span></div></div></li>
								<li><div class="vbox"><div class="velement">7</div><div>S<span class="sub">7</span></div></div></li>
								<li><div class="vbox"><div class="velement">8</div><div>S<span class="sub">8</span></div></div></li>
								<li><div class="vbox"><div class="velement">9</div><div>S<span class="sub">9</span></div></div></li>
								<li><div class="vbox"><div class="velement">10</div><div>S<span class="sub">10</span></div></div></li>
								<li><div class="vbox"><div class="velement">11</div><div>S<span class="sub">11</span></div></div></li>
								<li><div class="vbox"><div class="velement">12</div><div>S<span class="sub">12</span></div></div></li>
								<li><div class="vbox"><div class="velement">13</div><div>S<span class="sub">13</span></div></div></li>
								<li><div class="vbox"><div class="velement">14</div><div>S<span class="sub">14</span></div></div></li>
								<li><div class="vbox"><div class="velement">15</div><div>S<span class="sub">15</span></div></div></li>
								<li><div class="vbox"><div class="velement">16</div><div>S<span class="sub">16</span></div></div></li>
								<li><div class="vbox"><div class="velement">17</div><div>S<span class="sub">17</span></div></div></li>
								<li><div class="vbox"><div class="velement">18</div><div>S<span class="sub">18</span></div></div></li>
								<li><div class="vbox"><div class="velement">19</div><div>S<span class="sub">19</span></div></div></li>
								<li><div class="vbox"><div class="velement">20</div><div>S<span class="sub">20</span></div></div></li>
								<li><div class="vbox"><div class="velement">21</div><div>S<span class="sub">21</span></div></div></li>
								<li><div class="vbox"><div class="velement">22</div><div>S<span class="sub">22</span></div></div></li>
								<li><div class="vbox"><div class="velement">23</div><div>S<span class="sub">23</span></div></div></li>
								<li><div class="vbox"><div class="velement">24</div><div>S<span class="sub">24</span></div></div></li>
								<li><div class="vbox"><div class="velement">25</div><div>S<span class="sub">25</span></div></div></li>
								<li><div class="vbox"><div class="velement">26</div><div>S<span class="sub">26</span></div></div></li>
								<li><div class="vbox"><div class="velement">27</div><div>S<span class="sub">27</span></div></div></li>
								<li><div class="vbox"><div class="velement">28</div><div>S<span class="sub">28</span></div></div></li>
								<li><div class="vbox"><div class="velement">29</div><div>S<span class="sub">29</span></div></div></li>
								<li><div class="vbox"><div class="velement">30</div><div>S<span class="sub">30</span></div></div></li>
								<li><div class="vbox"><div class="velement">31</div><div>S<span class="sub">31</span></div></div></li>
								<li><div class="vbox"><div class="velement">32</div><div>S<span class="sub">32</span></div></div></li>
								<li><div class="vbox"><div class="velement">33</div><div>S<span class="sub">33</span></div></div></li>
								<li><div class="vbox"><div class="velement">34</div><div>S<span class="sub">34</span></div></div></li>
								<li><div class="vbox"><div class="velement">35</div><div>S<span class="sub">35</span></div></div></li>
								<li><div class="vbox"><div class="velement">36</div><div>S<span class="sub">36</span></div></div></li>
								<li><div class="vbox"><div class="velement">37</div><div>S<span class="sub">37</span></div></div></li>
								<li><div class="vbox"><div class="velement">38</div><div>S<span class="sub">38</span></div></div></li>
								<li><div class="vbox"><div class="velement">39</div><div>S<span class="sub">39</span></div></div></li>
								<li><div class="vbox"><div class="velement">40</div><div>S<span class="sub">40</span></div></div></li>
								<li><div class="vbox"><div class="velement">41</div><div>S<span class="sub">41</span></div></div></li>
								<li><div class="vbox"><div class="velement">42</div><div>S<span class="sub">42</span></div></div></li>
								<li><div class="vbox"><div class="velement">43</div><div>S<span class="sub">43</span></div></div></li>
								<li><div class="vbox"><div class="velement">44</div><div>S<span class="sub">44</span></div></div></li>
								<li><div class="vbox"><div class="velement">45</div><div>S<span class="sub">45</span></div></div></li>
								<li><div class="vbox"><div class="velement">46</div><div>S<span class="sub">46</span></div></div></li>
								<li><div class="vbox"><div class="velement">47</div><div>S<span class="sub">47</span></div></div></li>
								<li><div class="vbox"><div class="velement">48</div><div>S<span class="sub">48</span></div></div></li>
								<li><div class="vbox"><div class="velement">49</div><div>S<span class="sub">49</span></div></div></li>
								<li><div class="vbox"><div class="velement">50</div><div>S<span class="sub">50</span></div></div></li>
								<li><div class="vbox"><div class="velement">51</div><div>S<span class="sub">51</span></div></div></li>
								<li><div class="vbox"><div class="velement">52</div><div>S<span class="sub">52</span></div></div></li>
								<li><div class="vbox"><div class="velement">53</div><div>S<span class="sub">53</span></div></div></li>
								<li><div class="vbox"><div class="velement">54</div><div>S<span class="sub">54</span></div></div></li>
								<li><div class="vbox"><div class="velement">55</div><div>S<span class="sub">55</span></div></div></li>
								<li><div class="vbox"><div class="velement">56</div><div>S<span class="sub">56</span></div></div></li>
								<li><div class="vbox"><div class="velement">57</div><div>S<span class="sub">57</span></div></div></li>
								<li><div class="vbox"><div class="velement">58</div><div>S<span class="sub">58</span></div></div></li>
								<li><div class="vbox"><div class="velement">59</div><div>S<span class="sub">59</span></div></div></li>
								<li><div class="vbox"><div class="velement">60</div><div>S<span class="sub">60</span></div></div></li>
								<li><div class="vbox"><div class="velement">61</div><div>S<span class="sub">61</span></div></div></li>
								<li><div class="vbox"><div class="velement">62</div><div>S<span class="sub">62</span></div></div></li>
								<li><div class="vbox"><div class="velement">63</div><div>S<span class="sub">63</span></div></div></li>
								<li><div class="vbox"><div class="velement">64</div><div>S<span class="sub">64</span></div></div></li>
								<li><div class="vbox"><div class="velement">65</div><div>S<span class="sub">65</span></div></div></li>
								<li><div class="vbox"><div class="velement">66</div><div>S<span class="sub">66</span></div></div></li>
								<li><div class="vbox"><div class="velement">67</div><div>S<span class="sub">67</span></div></div></li>
								<li><div class="vbox"><div class="velement">68</div><div>S<span class="sub">68</span></div></div></li>
								<li><div class="vbox"><div class="velement">69</div><div>S<span class="sub">69</span></div></div></li>
								<li><div class="vbox"><div class="velement">70</div><div>S<span class="sub">70</span></div></div></li>
								<li><div class="vbox"><div class="velement">71</div><div>S<span class="sub">71</span></div></div></li>
								<li><div class="vbox"><div class="velement">72</div><div>S<span class="sub">72</span></div></div></li>
								<li><div class="vbox"><div class="velement">73</div><div>S<span class="sub">73</span></div></div></li>
								<li><div class="vbox"><div class="velement">74</div><div>S<span class="sub">74</span></div></div></li>
								<li><div class="vbox"><div class="velement">75</div><div>S<span class="sub">75</span></div></div></li>
								<li><div class="vbox"><div class="velement">76</div><div>S<span class="sub">76</span></div></div></li>
								<li><div class="vbox"><div class="velement">77</div><div>S<span class="sub">77</span></div></div></li>
								<li><div class="vbox"><div class="velement">78</div><div>S<span class="sub">78</span></div></div></li>
								<li><div class="vbox"><div class="velement">79</div><div>S<span class="sub">79</span></div></div></li>
								<li><div class="vbox"><div class="velement">80</div><div>S<span class="sub">80</span></div></div></li>
								<li><div class="vbox"><div class="velement">81</div><div>S<span class="sub">81</span></div></div></li>
								<li><div class="vbox"><div class="velement">82</div><div>S<span class="sub">82</span></div></div></li>
								<li><div class="vbox"><div class="velement">83</div><div>S<span class="sub">83</span></div></div></li>
								<li><div class="vbox"><div class="velement">84</div><div>S<span class="sub">84</span></div></div></li>
								<li><div class="vbox"><div class="velement">85</div><div>S<span class="sub">85</span></div></div></li>
								<li><div class="vbox"><div class="velement">86</div><div>S<span class="sub">86</span></div></div></li>
								<li><div class="vbox"><div class="velement">87</div><div>S<span class="sub">87</span></div></div></li>
								<li><div class="vbox"><div class="velement">88</div><div>S<span class="sub">88</span></div></div></li>
								<li><div class="vbox"><div class="velement">89</div><div>S<span class="sub">89</span></div></div></li>
								<li><div class="vbox"><div class="velement">90</div><div>S<span class="sub">90</span></div></div></li>
								<li><div class="vbox"><div class="velement">91</div><div>S<span class="sub">91</span></div></div></li>
								<li><div class="vbox"><div class="velement">92</div><div>S<span class="sub">92</span></div></div></li>
								<li><div class="vbox"><div class="velement">93</div><div>S<span class="sub">93</span></div></div></li>
								<li><div class="vbox"><div class="velement">94</div><div>S<span class="sub">94</span></div></div></li>
								<li><div class="vbox"><div class="velement">95</div><div>S<span class="sub">95</span></div></div></li>
								<li><div class="vbox"><div class="velement">96</div><div>S<span class="sub">96</span></div></div></li>
								<li><div class="vbox"><div class="velement">97</div><div>S<span class="sub">97</span></div></div></li>
								<li><div class="vbox"><div class="velement">98</div><div>S<span class="sub">98</span></div></div></li>
								<li><div class="vbox"><div class="velement">99</div><div>S<span class="sub">99</span></div></div></li>
								<li><div class="vbox"><div class="velement">100</div><div>S<span class="sub">100</span></div></div></li>
								<li><div class="vbox"><div class="velement">101</div><div>S<span class="sub">101</span></div></div></li>
								<li><div class="vbox"><div class="velement">102</div><div>S<span class="sub">102</span></div></div></li>
								<li><div class="vbox"><div class="velement">103</div><div>S<span class="sub">103</span></div></div></li>
								<li><div class="vbox"><div class="velement">104</div><div>S<span class="sub">104</span></div></div></li>
								<li><div class="vbox"><div class="velement">105</div><div>S<span class="sub">105</span></div></div></li>
								<li><div class="vbox"><div class="velement">106</div><div>S<span class="sub">106</span></div></div></li>
								<li><div class="vbox"><div class="velement">107</div><div>S<span class="sub">107</span></div></div></li>
								<li><div class="vbox"><div class="velement">108</div><div>S<span class="sub">108</span></div></div></li>
								<li><div class="vbox"><div class="velement">109</div><div>S<span class="sub">109</span></div></div></li>
								<li><div class="vbox"><div class="velement">110</div><div>S<span class="sub">110</span></div></div></li>
								<li><div class="vbox"><div class="velement">111</div><div>S<span class="sub">111</span></div></div></li>
								<li><div class="vbox"><div class="velement">112</div><div>S<span class="sub">112</span></div></div></li>
								<li><div class="vbox"><div class="velement">113</div><div>S<span class="sub">113</span></div></div></li>
								<li><div class="vbox"><div class="velement">114</div><div>S<span class="sub">114</span></div></div></li>
								<li><div class="vbox"><div class="velement">115</div><div>S<span class="sub">115</span></div></div></li>
								<li><div class="vbox"><div class="velement">116</div><div>S<span class="sub">116</span></div></div></li>
								<li><div class="vbox"><div class="velement">117</div><div>S<span class="sub">117</span></div></div></li>
								<li><div class="vbox"><div class="velement">118</div><div>S<span class="sub">118</span></div></div></li>
								<li><div class="vbox"><div class="velement">119</div><div>S<span class="sub">119</span></div></div></li>
								<li><div class="vbox"><div class="velement">120</div><div>S<span class="sub">120</span></div></div></li>
								<li><div class="vbox"><div class="velement">121</div><div>S<span class="sub">121</span></div></div></li>
								<li><div class="vbox"><div class="velement">122</div><div>S<span class="sub">122</span></div></div></li>
								<li><div class="vbox"><div class="velement">123</div><div>S<span class="sub">123</span></div></div></li>
								<li><div class="vbox"><div class="velement">124</div><div>S<span class="sub">124</span></div></div></li>
								<li><div class="vbox"><div class="velement">125</div><div>S<span class="sub">125</span></div></div></li>
								<li><div class="vbox"><div class="velement">126</div><div>S<span class="sub">126</span></div></div></li>
								<li><div class="vbox"><div class="velement">127</div><div>S<span class="sub">127</span></div></div></li>
								<li><div class="vbox"><div class="velement">128</div><div>S<span class="sub">128</span></div></div></li>
								<li><div class="vbox"><div class="velement">129</div><div>S<span class="sub">129</span></div></div></li>
								<li><div class="vbox"><div class="velement">130</div><div>S<span class="sub">130</span></div></div></li>
								<li><div class="vbox"><div class="velement">131</div><div>S<span class="sub">131</span></div></div></li>
								<li><div class="vbox"><div class="velement">132</div><div>S<span class="sub">132</span></div></div></li>
								<li><div class="vbox"><div class="velement">133</div><div>S<span class="sub">133</span></div></div></li>
								<li><div class="vbox"><div class="velement">134</div><div>S<span class="sub">134</span></div></div></li>
								<li><div class="vbox"><div class="velement">135</div><div>S<span class="sub">135</span></div></div></li>
								<li><div class="vbox"><div class="velement">136</div><div>S<span class="sub">136</span></div></div></li>
								<li><div class="vbox"><div class="velement">137</div><div>S<span class="sub">137</span></div></div></li>
								<li><div class="vbox"><div class="velement">138</div><div>S<span class="sub">138</span></div></div></li>
								<li><div class="vbox"><div class="velement">139</div><div>S<span class="sub">139</span></div></div></li>
								<li><div class="vbox"><div class="velement">140</div><div>S<span class="sub">140</span></div></div></li>
								<li><div class="vbox"><div class="velement">141</div><div>S<span class="sub">141</span></div></div></li>
								<li><div class="vbox"><div class="velement">142</div><div>S<span class="sub">142</span></div></div></li>
								<li><div class="vbox"><div class="velement">143</div><div>S<span class="sub">143</span></div></div></li>
								<li><div class="vbox"><div class="velement">144</div><div>S<span class="sub">144</span></div></div></li>
								<li><div class="vbox"><div class="velement">145</div><div>S<span class="sub">145</span></div></div></li>
								<li><div class="vbox"><div class="velement">146</div><div>S<span class="sub">146</span></div></div></li>
								<li><div class="vbox"><div class="velement">147</div><div>S<span class="sub">147</span></div></div></li>
								<li><div class="vbox"><div class="velement">148</div><div>S<span class="sub">148</span></div></div></li>
								<li><div class="vbox"><div class="velement">149</div><div>S<span class="sub">149</span></div></div></li>
								<li><div class="vbox"><div class="velement">150</div><div>S<span class="sub">150</span></div></div></li>
								<li><div class="vbox"><div class="velement">151</div><div>S<span class="sub">151</span></div></div></li>
								<li><div class="vbox"><div class="velement">152</div><div>S<span class="sub">152</span></div></div></li>
								<li><div class="vbox"><div class="velement">153</div><div>S<span class="sub">153</span></div></div></li>
								<li><div class="vbox"><div class="velement">154</div><div>S<span class="sub">154</span></div></div></li>
								<li><div class="vbox"><div class="velement">155</div><div>S<span class="sub">155</span></div></div></li>
								<li><div class="vbox"><div class="velement">156</div><div>S<span class="sub">156</span></div></div></li>
								<li><div class="vbox"><div class="velement">157</div><div>S<span class="sub">157</span></div></div></li>
								<li><div class="vbox"><div class="velement">158</div><div>S<span class="sub">158</span></div></div></li>
								<li><div class="vbox"><div class="velement">159</div><div>S<span class="sub">159</span></div></div></li>
								<li><div class="vbox"><div class="velement">160</div><div>S<span class="sub">160</span></div></div></li>
								<li><div class="vbox"><div class="velement">161</div><div>S<span class="sub">161</span></div></div></li>
								<li><div class="vbox"><div class="velement">162</div><div>S<span class="sub">162</span></div></div></li>
								<li><div class="vbox"><div class="velement">163</div><div>S<span class="sub">163</span></div></div></li>
								<li><div class="vbox"><div class="velement">164</div><div>S<span class="sub">164</span></div></div></li>
								<li><div class="vbox"><div class="velement">165</div><div>S<span class="sub">165</span></div></div></li>
								<li><div class="vbox"><div class="velement">166</div><div>S<span class="sub">166</span></div></div></li>
								<li><div class="vbox"><div class="velement">167</div><div>S<span class="sub">167</span></div></div></li>
								<li><div class="vbox"><div class="velement">168</div><div>S<span class="sub">168</span></div></div></li>
								<li><div class="vbox"><div class="velement">169</div><div>S<span class="sub">169</span></div></div></li>
								<li><div class="vbox"><div class="velement">170</div><div>S<span class="sub">170</span></div></div></li>
								<li><div class="vbox"><div class="velement">171</div><div>S<span class="sub">171</span></div></div></li>
								<li><div class="vbox"><div class="velement">172</div><div>S<span class="sub">172</span></div></div></li>
								<li><div class="vbox"><div class="velement">173</div><div>S<span class="sub">173</span></div></div></li>
								<li><div class="vbox"><div class="velement">174</div><div>S<span class="sub">174</span></div></div></li>
								<li><div class="vbox"><div class="velement">175</div><div>S<span class="sub">175</span></div></div></li>
								<li><div class="vbox"><div class="velement">176</div><div>S<span class="sub">176</span></div></div></li>
								<li><div class="vbox"><div class="velement">177</div><div>S<span class="sub">177</span></div></div></li>
								<li><div class="vbox"><div class="velement">178</div><div>S<span class="sub">178</span></div></div></li>
								<li><div class="vbox"><div class="velement">179</div><div>S<span class="sub">179</span></div></div></li>
								<li><div class="vbox"><div class="velement">180</div><div>S<span class="sub">180</span></div></div></li>
								<li><div class="vbox"><div class="velement">181</div><div>S<span class="sub">181</span></div></div></li>
								<li><div class="vbox"><div class="velement">182</div><div>S<span class="sub">182</span></div></div></li>
								<li><div class="vbox"><div class="velement">183</div><div>S<span class="sub">183</span></div></div></li>
								<li><div class="vbox"><div class="velement">184</div><div>S<span class="sub">184</span></div></div></li>
								<li><div class="vbox"><div class="velement">185</div><div>S<span class="sub">185</span></div></div></li>
								<li><div class="vbox"><div class="velement">186</div><div>S<span class="sub">186</span></div></div></li>
								<li><div class="vbox"><div class="velement">187</div><div>S<span class="sub">187</span></div></div></li>
								<li><div class="vbox"><div class="velement">188</div><div>S<span class="sub">188</span></div></div></li>
								<li><div class="vbox"><div class="velement">189</div><div>S<span class="sub">189</span></div></div></li>
								<li><div class="vbox"><div class="velement">190</div><div>S<span class="sub">190</span></div></div></li>
								<li><div class="vbox"><div class="velement">191</div><div>S<span class="sub">191</span></div></div></li>
								<li><div class="vbox"><div class="velement">192</div><div>S<span class="sub">192</span></div></div></li>
								<li><div class="vbox"><div class="velement">193</div><div>S<span class="sub">193</span></div></div></li>
								<li><div class="vbox"><div class="velement">194</div><div>S<span class="sub">194</span></div></div></li>
								<li><div class="vbox"><div class="velement">195</div><div>S<span class="sub">195</span></div></div></li>
								<li><div class="vbox"><div class="velement">196</div><div>S<span class="sub">196</span></div></div></li>
								<li><div class="vbox"><div class="velement">197</div><div>S<span class="sub">197</span></div></div></li>
								<li><div class="vbox"><div class="velement">198</div><div>S<span class="sub">198</span></div></div></li>
								<li><div class="vbox"><div class="velement">199</div><div>S<span class="sub">199</span></div></div></li>
								<li><div class="vbox"><div class="velement">200</div><div>S<span class="sub">200</span></div></div></li>
								<li><div class="vbox"><div class="velement">201</div><div>S<span class="sub">201</span></div></div></li>
								<li><div class="vbox"><div class="velement">202</div><div>S<span class="sub">202</span></div></div></li>
								<li><div class="vbox"><div class="velement">203</div><div>S<span class="sub">203</span></div></div></li>
								<li><div class="vbox"><div class="velement">204</div><div>S<span class="sub">204</span></div></div></li>
								<li><div class="vbox"><div class="velement">205</div><div>S<span class="sub">205</span></div></div></li>
								<li><div class="vbox"><div class="velement">206</div><div>S<span class="sub">206</span></div></div></li>
								<li><div class="vbox"><div class="velement">207</div><div>S<span class="sub">207</span></div></div></li>
								<li><div class="vbox"><div class="velement">208</div><div>S<span class="sub">208</span></div></div></li>
								<li><div class="vbox"><div class="velement">209</div><div>S<span class="sub">209</span></div></div></li>
								<li><div class="vbox"><div class="velement">210</div><div>S<span class="sub">210</span></div></div></li>
								<li><div class="vbox"><div class="velement">211</div><div>S<span class="sub">211</span></div></div></li>
								<li><div class="vbox"><div class="velement">212</div><div>S<span class="sub">212</span></div></div></li>
								<li><div class="vbox"><div class="velement">213</div><div>S<span class="sub">213</span></div></div></li>
								<li><div class="vbox"><div class="velement">214</div><div>S<span class="sub">214</span></div></div></li>
								<li><div class="vbox"><div class="velement">215</div><div>S<span class="sub">215</span></div></div></li>
								<li><div class="vbox"><div class="velement">216</div><div>S<span class="sub">216</span></div></div></li>
								<li><div class="vbox"><div class="velement">217</div><div>S<span class="sub">217</span></div></div></li>
								<li><div class="vbox"><div class="velement">218</div><div>S<span class="sub">218</span></div></div></li>
								<li><div class="vbox"><div class="velement">219</div><div>S<span class="sub">219</span></div></div></li>
								<li><div class="vbox"><div class="velement">220</div><div>S<span class="sub">220</span></div></div></li>
								<li><div class="vbox"><div class="velement">221</div><div>S<span class="sub">221</span></div></div></li>
								<li><div class="vbox"><div class="velement">222</div><div>S<span class="sub">222</span></div></div></li>
								<li><div class="vbox"><div class="velement">223</div><div>S<span class="sub">223</span></div></div></li>
								<li><div class="vbox"><div class="velement">224</div><div>S<span class="sub">224</span></div></div></li>
								<li><div class="vbox"><div class="velement">225</div><div>S<span class="sub">225</span></div></div></li>
								<li><div class="vbox"><div class="velement">226</div><div>S<span class="sub">226</span></div></div></li>
								<li><div class="vbox"><div class="velement">227</div><div>S<span class="sub">227</span></div></div></li>
								<li><div class="vbox"><div class="velement">228</div><div>S<span class="sub">228</span></div></div></li>
								<li><div class="vbox"><div class="velement">229</div><div>S<span class="sub">229</span></div></div></li>
								<li><div class="vbox"><div class="velement">230</div><div>S<span class="sub">230</span></div></div></li>
								<li><div class="vbox"><div class="velement">231</div><div>S<span class="sub">231</span></div></div></li>
								<li><div class="vbox"><div class="velement">232</div><div>S<span class="sub">232</span></div></div></li>
								<li><div class="vbox"><div class="velement">233</div><div>S<span class="sub">233</span></div></div></li>
								<li><div class="vbox"><div class="velement">234</div><div>S<span class="sub">234</span></div></div></li>
								<li><div class="vbox"><div class="velement">235</div><div>S<span class="sub">235</span></div></div></li>
								<li><div class="vbox"><div class="velement">236</div><div>S<span class="sub">236</span></div></div></li>
								<li><div class="vbox"><div class="velement">237</div><div>S<span class="sub">237</span></div></div></li>
								<li><div class="vbox"><div class="velement">238</div><div>S<span class="sub">238</span></div></div></li>
								<li><div class="vbox"><div class="velement">239</div><div>S<span class="sub">239</span></div></div></li>
								<li><div class="vbox"><div class="velement">240</div><div>S<span class="sub">240</span></div></div></li>
								<li><div class="vbox"><div class="velement">241</div><div>S<span class="sub">241</span></div></div></li>
								<li><div class="vbox"><div class="velement">242</div><div>S<span class="sub">242</span></div></div></li>
								<li><div class="vbox"><div class="velement">243</div><div>S<span class="sub">243</span></div></div></li>
								<li><div class="vbox"><div class="velement">244</div><div>S<span class="sub">244</span></div></div></li>
								<li><div class="vbox"><div class="velement">245</div><div>S<span class="sub">245</span></div></div></li>
								<li><div class="vbox"><div class="velement">246</div><div>S<span class="sub">246</span></div></div></li>
								<li><div class="vbox"><div class="velement">247</div><div>S<span class="sub">247</span></div></div></li>
								<li><div class="vbox"><div class="velement">248</div><div>S<span class="sub">248</span></div></div></li>
								<li><div class="vbox"><div class="velement">249</div><div>S<span class="sub">249</span></div></div></li>
								<li><div class="vbox"><div class="velement">250</div><div>S<span class="sub">250</span></div></div></li>
								<li><div class="vbox"><div class="velement">251</div><div>S<span class="sub">251</span></div></div></li>
								<li><div class="vbox"><div class="velement">252</div><div>S<span class="sub">252</span></div></div></li>
							</ul> 
						</div>
						<div class="vbox"><div class="velement">253</div><div>S<span class="sub">253</span></div></div>
						<div class="vbox"><div class="velement">254</div><div>S<span class="sub">254</span></div></div>
						<div class="vbox"><div class="velement">255</div><div>S<span class="sub">255</span></div></div>
					</div>
					<div class="clear"> </div> 
						
					<p>Temporary vector T (<span class="italic">empty</span>):</p>
					<div>
						<div class="vbox"><div class="velement"> </div><div>T<span class="sub">0</span></div></div>
						<div class="vbox"><div class="velement"> </div><div>T<span class="sub">1</span></div></div>
						<div class="vbox"><div class="velement"> </div><div>T<span class="sub">2</span></div></div>
						<div class="hscroll">
							<ul>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">3</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">4</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">5</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">6</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">7</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">8</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">9</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">10</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">11</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">12</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">13</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">14</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">15</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">16</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">17</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">18</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">19</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">20</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">21</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">22</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">23</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">24</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">25</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">26</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">27</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">28</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">29</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">30</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">31</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">32</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">33</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">34</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">35</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">36</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">37</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">38</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">39</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">40</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">41</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">42</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">43</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">44</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">45</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">46</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">47</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">48</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">49</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">50</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">51</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">52</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">53</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">54</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">55</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">56</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">57</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">58</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">59</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">60</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">61</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">62</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">63</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">64</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">65</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">66</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">67</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">68</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">69</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">70</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">71</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">72</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">73</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">74</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">75</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">76</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">77</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">78</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">79</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">80</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">81</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">82</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">83</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">84</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">85</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">86</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">87</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">88</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">89</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">90</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">91</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">92</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">93</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">94</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">95</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">96</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">97</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">98</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">99</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">100</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">101</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">102</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">103</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">104</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">105</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">106</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">107</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">108</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">109</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">110</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">111</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">112</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">113</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">114</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">115</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">116</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">117</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">118</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">119</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">120</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">121</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">122</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">123</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">124</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">125</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">126</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">127</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">128</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">129</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">130</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">131</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">132</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">133</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">134</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">135</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">136</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">137</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">138</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">139</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">140</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">141</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">142</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">143</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">144</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">145</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">146</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">147</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">148</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">149</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">150</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">151</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">152</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">153</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">154</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">155</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">156</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">157</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">158</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">159</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">160</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">161</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">162</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">163</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">164</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">165</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">166</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">167</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">168</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">169</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">170</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">171</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">172</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">173</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">174</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">175</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">176</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">177</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">178</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">179</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">180</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">181</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">182</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">183</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">184</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">185</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">186</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">187</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">188</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">189</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">190</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">191</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">192</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">193</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">194</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">195</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">196</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">197</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">198</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">199</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">200</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">201</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">202</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">203</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">204</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">205</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">206</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">207</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">208</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">209</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">210</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">211</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">212</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">213</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">214</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">215</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">216</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">217</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">218</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">219</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">220</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">221</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">222</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">223</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">224</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">225</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">226</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">227</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">228</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">229</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">230</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">231</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">232</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">233</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">234</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">235</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">236</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">237</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">238</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">239</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">240</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">241</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">242</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">243</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">244</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">245</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">246</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">247</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">248</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">249</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">250</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">251</span></div></div></li>
								<li><div class="vbox"><div class="velement"> </div><div>T<span class="sub">252</span></div></div></li>
							</ul>
						</div>
						<div class="vbox"><div class="velement"> </div><div>T<span class="sub">253</span></div></div>
						<div class="vbox"><div class="velement"> </div><div>T<span class="sub">254</span></div></div>
						<div class="vbox"><div class="velement"> </div><div>T<span class="sub">255</span></div></div>			
					</div>
					<div class="clear"> </div>

					<div><p>Enter key K:</p></div>

					<div class="frameK">
						<input id="keyvalue0" placeholder=8>
						<button type="button" class='confirm' onclick="checkkeyarray(0)">&#8594;</button>
						<div>K<span class="sub">0</span></div>
					</div>

					<div id="testoutput"></div>


					<script type="text/javascript">
						var keyarray = [8];
						var keylength = 0;
						var lastkeyele =  document.getElementsByClassName("frameK")[0];

						var testhtmlel = document.getElementById("testoutput");

						function checkkeyarray(ith){
							var arrayframeK = document.getElementsByClassName("frameK");
							var sumframeK = arrayframeK.length;
							var keyindex = parseInt(ith);
							var ithkeyvalue = document.getElementById("keyvalue" + keyindex.toString()).value;

							if( (keyindex == 0) && (!ithkeyvalue)){	ithkeyvalue = 8; } 

							var inputcheck = valuecheck(ithkeyvalue.toString());
							if(inputcheck){ 

								keyarray[keyindex] = ithkeyvalue;	 // update key array								

								var filtered = keyarray.filter(Boolean);  // double validate array values
								keyarray = filtered;

								keylength = keyarray.length;  // update keylength

								if( keyindex == (sumframeK-1) ){
									var newdiv = document.createElement("div");
									lastkeyele.insertAdjacentHTML("afterend", createframeK(keylength));
									lastkeyele = document.getElementsByClassName("frameK")[keylength];
								}

							testhtmlel.innerHTML = keyarray;

							fillt("tvalue", false);
							fillt("tvalue2", true); 
							} 

						}

						function createframeK(indexK) {
							var s0 = '<div class="frameK"><input id="keyvalue'
							var s1 = '"><button type="button" class="confirm" onclick="checkkeyarray('
							var s2 = ')">&#8594;</button><div>K<span class="sub">'
							var s3 = '</span></div></div>'
							var emptyframeK = s0 + indexK + s1 + indexK + s2 + indexK + s3;
							return emptyframeK;
						}

						function valuecheck(stringvalue){
							var digitonly = /^([0-9]*)$/.test(stringvalue);
							var numericvalue = parseInt(stringvalue);
							if(digitonly && (numericvalue >= 0) && (numericvalue < 256)){ return true;	} 
							else {
								alert("Please pass in an integer within the range of 0 to 255. Invalid key values will not be accepted.");
								return false;
							}	
						}
			
						function fillt(element, hasID){         // boolean hasID
							s01 = '<div class="vbox" id="stage2T' ;
							s02 = '"><div class="velement">' ;
							s1 = '<div class="vbox"><div class="velement">' ;
							s2 = '</div><div>T<span class="sub">' ;
							keylength = keyarray.length ;
							var keyindex = 0 ;
							var tvector ='' ;
							for (i=0 ; i<256 ; i++) {
									keyindex = i % keylength ;
								 	var keyelement = keyarray[keyindex] ;
								 	if(hasID){ var selement = s01 + i.toString() + s02 + keyelement + s2 + i.toString() + s3 ; }
								 	else { var selement = s1 + keyelement + s2 + i.toString() + s3 ; }
							 		if ( i == 3 ) { tvector = tvector + '<div class="hscroll hscrollT"><ul>' ; }
							 		if ( i == 253 ) { tvector = tvector + '</ul></div>' ; }
							 		if ( (i > 2) & (i < 253 ) ) {	selement = li + selement + liend ; }
							 		tvector = tvector + selement ;
						 		}
						 	document.getElementById(element).innerHTML = tvector + divclear ;

						}


					</script>


					<div>
						<div id='showkey'></div>	
					</div>
					<div class="clear"></div> <br/>

					<p>Temporary vector T:</p>
					<div id='tvalue' name='tvalue'></div>
					<div class="clear"> </div>

					<script type="text/javascript">   
						fillt("tvalue", false);
					</script>
				</div>

				<div class="gridcol2">
					<button type="button" class='question'>?</button>
					<p class="descriptionbox">
						In stage 1, the state vector S and temporary vector T are initialized:<br>
							I. Elements of S are filled out with values from 0 to 255 in an ascending order.<br>
							II. A key of variable length (in the range of 1 to 256 bytes) is required to initialize T.<br>
							III. The key is determined by the user of RC4. Please type in a numberical key. Each digit occupies one byte in real-world implementation.<br>
							IV. After typing in the key of your choice, please press the CONFIRM button to initialize T.
					</p>
					<script type="text/javascript">
						var question = document.getElementsByClassName("question")[0];
						var descriptionbox = document.getElementsByClassName("descriptionbox")[0];
						function answer(){
							if( descriptionbox.style.opacity == "1"){
								descriptionbox.style.opacity = "0";
							} 
							else {descriptionbox.style.opacity = "1";}		
						}
			    		question.addEventListener("click", answer, false);    
					</script>

				</div>
			</div>
			
		</div>

		<div id="blankspace">--</div>   <!--- leave blank space between two sections--->

		<div id="section2">
			<h1>Initial Permutation of S</h1>

			<div class="gridcontainer1">
				<div class="gridelement1">				
					<table class="counterbox"><tr>
						<th>Round</th>
						<th class="stage2counter">0</th>	
					</tr></table>				
					<div class="bpfc">
						<button type="button" id="backbutton">BACKWARD</button>
						<button type="button" id="togglebutton">PLAY</button>
						<button type="button" id="stepforthbutton">FORWARD</button>
						<button type="button" id="forthbutton">COMPLETE</button>
					</div>
				</div>

				<div class="gridelement2">
					<p class="stage2step1">Temporary variables:
						i = <a id="ivalue1">0</a>, j = <a id="jvalue1">0</a>
					</p>
					<p class="stage2step2"><br/> Step 1: Find S[j] </p>
						<!--- j = (j + S[i] + T[i]) mod 256<br> --->
					<p class="stage2step3"> j = (<a id="jvalue2">j</a> + S[<a id="ivalue2">i</a>] + T[<a id="ivalue3">i</a>]) mod 256 </p> 
					<p>
						<div class="stage2step4 styledlikep"> j = ( 
							<a id="jvalue3">0</a> + <a id="stage2vectorsi">0</a> + <a id="stage2vectorti">i</a> ) mod 256   
						</div>
						<p class="stage2step5"> = 
							<a id="jvalue4">0</a>
						</p> 
					</p>
					<p class="stage2step6"> S[<a id="jvalue5">j</a>] = <a id="step6Sj"></a> </p>
				</div>

				<div class="gridelement3">
					<p class="stage2step7"> Step 2: Find S[i] </p> 
					<p class="stage2step8"> S[<a id="ivalue4" >i</a>] = <a id="step6Si"></a> </p>					
					<p class="stage2step9"><br> Step 3: Swap S[<a id="ivalue5" >i</a>], S[<a id="jvalue6" >j</a>] </p>
					<p class="stage2step10"><br> Step 4: Increment i </p>				
				</div>

				<div class="gridelement4">
					<p>State vector S: </p>					
					<div class="zindex1">
						<div class="vbox" id="stage2S0"><div class="velement">0</div><div>S<span class="sub">0</span></div></div>
						<div class="vbox" id="stage2S1"><div class="velement">1</div><div>S<span class="sub">1</span></div></div>
						<div class="vbox" id="stage2S2"><div class="velement">2</div><div>S<span class="sub">2</span></div></div>
						<div class="hscroll hscrollS">
							<ul>
									<li><div class="vbox" id="stage2S3"><div class="velement">3</div><div>S<span class="sub">3</span></div></div></li>
									<li><div class="vbox" id="stage2S4"><div class="velement">4</div><div>S<span class="sub">4</span></div></div></li>
									<li><div class="vbox" id="stage2S5"><div class="velement">5</div><div>S<span class="sub">5</span></div></div></li>
									<li><div class="vbox" id="stage2S6"><div class="velement">6</div><div>S<span class="sub">6</span></div></div></li>
									<li><div class="vbox" id="stage2S7"><div class="velement">7</div><div>S<span class="sub">7</span></div></div></li>
									<li><div class="vbox" id="stage2S8"><div class="velement">8</div><div>S<span class="sub">8</span></div></div></li>
									<li><div class="vbox" id="stage2S9"><div class="velement">9</div><div>S<span class="sub">9</span></div></div></li>
									<li><div class="vbox" id="stage2S10"><div class="velement">10</div><div>S<span class="sub">10</span></div></div></li>
									<li><div class="vbox" id="stage2S11"><div class="velement">11</div><div>S<span class="sub">11</span></div></div></li>
									<li><div class="vbox" id="stage2S12"><div class="velement">12</div><div>S<span class="sub">12</span></div></div></li>
									<li><div class="vbox" id="stage2S13"><div class="velement">13</div><div>S<span class="sub">13</span></div></div></li>
									<li><div class="vbox" id="stage2S14"><div class="velement">14</div><div>S<span class="sub">14</span></div></div></li>
									<li><div class="vbox" id="stage2S15"><div class="velement">15</div><div>S<span class="sub">15</span></div></div></li>
									<li><div class="vbox" id="stage2S16"><div class="velement">16</div><div>S<span class="sub">16</span></div></div></li>
									<li><div class="vbox" id="stage2S17"><div class="velement">17</div><div>S<span class="sub">17</span></div></div></li>
									<li><div class="vbox" id="stage2S18"><div class="velement">18</div><div>S<span class="sub">18</span></div></div></li>
									<li><div class="vbox" id="stage2S19"><div class="velement">19</div><div>S<span class="sub">19</span></div></div></li>
									<li><div class="vbox" id="stage2S20"><div class="velement">20</div><div>S<span class="sub">20</span></div></div></li>
									<li><div class="vbox" id="stage2S21"><div class="velement">21</div><div>S<span class="sub">21</span></div></div></li>
									<li><div class="vbox" id="stage2S22"><div class="velement">22</div><div>S<span class="sub">22</span></div></div></li>
									<li><div class="vbox" id="stage2S23"><div class="velement">23</div><div>S<span class="sub">23</span></div></div></li>
									<li><div class="vbox" id="stage2S24"><div class="velement">24</div><div>S<span class="sub">24</span></div></div></li>
									<li><div class="vbox" id="stage2S25"><div class="velement">25</div><div>S<span class="sub">25</span></div></div></li>
									<li><div class="vbox" id="stage2S26"><div class="velement">26</div><div>S<span class="sub">26</span></div></div></li>
									<li><div class="vbox" id="stage2S27"><div class="velement">27</div><div>S<span class="sub">27</span></div></div></li>
									<li><div class="vbox" id="stage2S28"><div class="velement">28</div><div>S<span class="sub">28</span></div></div></li>
									<li><div class="vbox" id="stage2S29"><div class="velement">29</div><div>S<span class="sub">29</span></div></div></li>
									<li><div class="vbox" id="stage2S30"><div class="velement">30</div><div>S<span class="sub">30</span></div></div></li>
									<li><div class="vbox" id="stage2S31"><div class="velement">31</div><div>S<span class="sub">31</span></div></div></li>
									<li><div class="vbox" id="stage2S32"><div class="velement">32</div><div>S<span class="sub">32</span></div></div></li>
									<li><div class="vbox" id="stage2S33"><div class="velement">33</div><div>S<span class="sub">33</span></div></div></li>
									<li><div class="vbox" id="stage2S34"><div class="velement">34</div><div>S<span class="sub">34</span></div></div></li>
									<li><div class="vbox" id="stage2S35"><div class="velement">35</div><div>S<span class="sub">35</span></div></div></li>
									<li><div class="vbox" id="stage2S36"><div class="velement">36</div><div>S<span class="sub">36</span></div></div></li>
									<li><div class="vbox" id="stage2S37"><div class="velement">37</div><div>S<span class="sub">37</span></div></div></li>
									<li><div class="vbox" id="stage2S38"><div class="velement">38</div><div>S<span class="sub">38</span></div></div></li>
									<li><div class="vbox" id="stage2S39"><div class="velement">39</div><div>S<span class="sub">39</span></div></div></li>
									<li><div class="vbox" id="stage2S40"><div class="velement">40</div><div>S<span class="sub">40</span></div></div></li>
									<li><div class="vbox" id="stage2S41"><div class="velement">41</div><div>S<span class="sub">41</span></div></div></li>
									<li><div class="vbox" id="stage2S42"><div class="velement">42</div><div>S<span class="sub">42</span></div></div></li>
									<li><div class="vbox" id="stage2S43"><div class="velement">43</div><div>S<span class="sub">43</span></div></div></li>
									<li><div class="vbox" id="stage2S44"><div class="velement">44</div><div>S<span class="sub">44</span></div></div></li>
									<li><div class="vbox" id="stage2S45"><div class="velement">45</div><div>S<span class="sub">45</span></div></div></li>
									<li><div class="vbox" id="stage2S46"><div class="velement">46</div><div>S<span class="sub">46</span></div></div></li>
									<li><div class="vbox" id="stage2S47"><div class="velement">47</div><div>S<span class="sub">47</span></div></div></li>
									<li><div class="vbox" id="stage2S48"><div class="velement">48</div><div>S<span class="sub">48</span></div></div></li>
									<li><div class="vbox" id="stage2S49"><div class="velement">49</div><div>S<span class="sub">49</span></div></div></li>
									<li><div class="vbox" id="stage2S50"><div class="velement">50</div><div>S<span class="sub">50</span></div></div></li>
									<li><div class="vbox" id="stage2S51"><div class="velement">51</div><div>S<span class="sub">51</span></div></div></li>
									<li><div class="vbox" id="stage2S52"><div class="velement">52</div><div>S<span class="sub">52</span></div></div></li>
									<li><div class="vbox" id="stage2S53"><div class="velement">53</div><div>S<span class="sub">53</span></div></div></li>
									<li><div class="vbox" id="stage2S54"><div class="velement">54</div><div>S<span class="sub">54</span></div></div></li>
									<li><div class="vbox" id="stage2S55"><div class="velement">55</div><div>S<span class="sub">55</span></div></div></li>
									<li><div class="vbox" id="stage2S56"><div class="velement">56</div><div>S<span class="sub">56</span></div></div></li>
									<li><div class="vbox" id="stage2S57"><div class="velement">57</div><div>S<span class="sub">57</span></div></div></li>
									<li><div class="vbox" id="stage2S58"><div class="velement">58</div><div>S<span class="sub">58</span></div></div></li>
									<li><div class="vbox" id="stage2S59"><div class="velement">59</div><div>S<span class="sub">59</span></div></div></li>
									<li><div class="vbox" id="stage2S60"><div class="velement">60</div><div>S<span class="sub">60</span></div></div></li>
									<li><div class="vbox" id="stage2S61"><div class="velement">61</div><div>S<span class="sub">61</span></div></div></li>
									<li><div class="vbox" id="stage2S62"><div class="velement">62</div><div>S<span class="sub">62</span></div></div></li>
									<li><div class="vbox" id="stage2S63"><div class="velement">63</div><div>S<span class="sub">63</span></div></div></li>
									<li><div class="vbox" id="stage2S64"><div class="velement">64</div><div>S<span class="sub">64</span></div></div></li>
									<li><div class="vbox" id="stage2S65"><div class="velement">65</div><div>S<span class="sub">65</span></div></div></li>
									<li><div class="vbox" id="stage2S66"><div class="velement">66</div><div>S<span class="sub">66</span></div></div></li>
									<li><div class="vbox" id="stage2S67"><div class="velement">67</div><div>S<span class="sub">67</span></div></div></li>
									<li><div class="vbox" id="stage2S68"><div class="velement">68</div><div>S<span class="sub">68</span></div></div></li>
									<li><div class="vbox" id="stage2S69"><div class="velement">69</div><div>S<span class="sub">69</span></div></div></li>
									<li><div class="vbox" id="stage2S70"><div class="velement">70</div><div>S<span class="sub">70</span></div></div></li>
									<li><div class="vbox" id="stage2S71"><div class="velement">71</div><div>S<span class="sub">71</span></div></div></li>
									<li><div class="vbox" id="stage2S72"><div class="velement">72</div><div>S<span class="sub">72</span></div></div></li>
									<li><div class="vbox" id="stage2S73"><div class="velement">73</div><div>S<span class="sub">73</span></div></div></li>
									<li><div class="vbox" id="stage2S74"><div class="velement">74</div><div>S<span class="sub">74</span></div></div></li>
									<li><div class="vbox" id="stage2S75"><div class="velement">75</div><div>S<span class="sub">75</span></div></div></li>
									<li><div class="vbox" id="stage2S76"><div class="velement">76</div><div>S<span class="sub">76</span></div></div></li>
									<li><div class="vbox" id="stage2S77"><div class="velement">77</div><div>S<span class="sub">77</span></div></div></li>
									<li><div class="vbox" id="stage2S78"><div class="velement">78</div><div>S<span class="sub">78</span></div></div></li>
									<li><div class="vbox" id="stage2S79"><div class="velement">79</div><div>S<span class="sub">79</span></div></div></li>
									<li><div class="vbox" id="stage2S80"><div class="velement">80</div><div>S<span class="sub">80</span></div></div></li>
									<li><div class="vbox" id="stage2S81"><div class="velement">81</div><div>S<span class="sub">81</span></div></div></li>
									<li><div class="vbox" id="stage2S82"><div class="velement">82</div><div>S<span class="sub">82</span></div></div></li>
									<li><div class="vbox" id="stage2S83"><div class="velement">83</div><div>S<span class="sub">83</span></div></div></li>
									<li><div class="vbox" id="stage2S84"><div class="velement">84</div><div>S<span class="sub">84</span></div></div></li>
									<li><div class="vbox" id="stage2S85"><div class="velement">85</div><div>S<span class="sub">85</span></div></div></li>
									<li><div class="vbox" id="stage2S86"><div class="velement">86</div><div>S<span class="sub">86</span></div></div></li>
									<li><div class="vbox" id="stage2S87"><div class="velement">87</div><div>S<span class="sub">87</span></div></div></li>
									<li><div class="vbox" id="stage2S88"><div class="velement">88</div><div>S<span class="sub">88</span></div></div></li>
									<li><div class="vbox" id="stage2S89"><div class="velement">89</div><div>S<span class="sub">89</span></div></div></li>
									<li><div class="vbox" id="stage2S90"><div class="velement">90</div><div>S<span class="sub">90</span></div></div></li>
									<li><div class="vbox" id="stage2S91"><div class="velement">91</div><div>S<span class="sub">91</span></div></div></li>
									<li><div class="vbox" id="stage2S92"><div class="velement">92</div><div>S<span class="sub">92</span></div></div></li>
									<li><div class="vbox" id="stage2S93"><div class="velement">93</div><div>S<span class="sub">93</span></div></div></li>
									<li><div class="vbox" id="stage2S94"><div class="velement">94</div><div>S<span class="sub">94</span></div></div></li>
									<li><div class="vbox" id="stage2S95"><div class="velement">95</div><div>S<span class="sub">95</span></div></div></li>
									<li><div class="vbox" id="stage2S96"><div class="velement">96</div><div>S<span class="sub">96</span></div></div></li>
									<li><div class="vbox" id="stage2S97"><div class="velement">97</div><div>S<span class="sub">97</span></div></div></li>
									<li><div class="vbox" id="stage2S98"><div class="velement">98</div><div>S<span class="sub">98</span></div></div></li>
									<li><div class="vbox" id="stage2S99"><div class="velement">99</div><div>S<span class="sub">99</span></div></div></li>
									<li><div class="vbox" id="stage2S100"><div class="velement">100</div><div>S<span class="sub">100</span></div></div></li>
									<li><div class="vbox" id="stage2S101"><div class="velement">101</div><div>S<span class="sub">101</span></div></div></li>
									<li><div class="vbox" id="stage2S102"><div class="velement">102</div><div>S<span class="sub">102</span></div></div></li>
									<li><div class="vbox" id="stage2S103"><div class="velement">103</div><div>S<span class="sub">103</span></div></div></li>
									<li><div class="vbox" id="stage2S104"><div class="velement">104</div><div>S<span class="sub">104</span></div></div></li>
									<li><div class="vbox" id="stage2S105"><div class="velement">105</div><div>S<span class="sub">105</span></div></div></li>
									<li><div class="vbox" id="stage2S106"><div class="velement">106</div><div>S<span class="sub">106</span></div></div></li>
									<li><div class="vbox" id="stage2S107"><div class="velement">107</div><div>S<span class="sub">107</span></div></div></li>
									<li><div class="vbox" id="stage2S108"><div class="velement">108</div><div>S<span class="sub">108</span></div></div></li>
									<li><div class="vbox" id="stage2S109"><div class="velement">109</div><div>S<span class="sub">109</span></div></div></li>
									<li><div class="vbox" id="stage2S110"><div class="velement">110</div><div>S<span class="sub">110</span></div></div></li>
									<li><div class="vbox" id="stage2S111"><div class="velement">111</div><div>S<span class="sub">111</span></div></div></li>
									<li><div class="vbox" id="stage2S112"><div class="velement">112</div><div>S<span class="sub">112</span></div></div></li>
									<li><div class="vbox" id="stage2S113"><div class="velement">113</div><div>S<span class="sub">113</span></div></div></li>
									<li><div class="vbox" id="stage2S114"><div class="velement">114</div><div>S<span class="sub">114</span></div></div></li>
									<li><div class="vbox" id="stage2S115"><div class="velement">115</div><div>S<span class="sub">115</span></div></div></li>
									<li><div class="vbox" id="stage2S116"><div class="velement">116</div><div>S<span class="sub">116</span></div></div></li>
									<li><div class="vbox" id="stage2S117"><div class="velement">117</div><div>S<span class="sub">117</span></div></div></li>
									<li><div class="vbox" id="stage2S118"><div class="velement">118</div><div>S<span class="sub">118</span></div></div></li>
									<li><div class="vbox" id="stage2S119"><div class="velement">119</div><div>S<span class="sub">119</span></div></div></li>
									<li><div class="vbox" id="stage2S120"><div class="velement">120</div><div>S<span class="sub">120</span></div></div></li>
									<li><div class="vbox" id="stage2S121"><div class="velement">121</div><div>S<span class="sub">121</span></div></div></li>
									<li><div class="vbox" id="stage2S122"><div class="velement">122</div><div>S<span class="sub">122</span></div></div></li>
									<li><div class="vbox" id="stage2S123"><div class="velement">123</div><div>S<span class="sub">123</span></div></div></li>
									<li><div class="vbox" id="stage2S124"><div class="velement">124</div><div>S<span class="sub">124</span></div></div></li>
									<li><div class="vbox" id="stage2S125"><div class="velement">125</div><div>S<span class="sub">125</span></div></div></li>
									<li><div class="vbox" id="stage2S126"><div class="velement">126</div><div>S<span class="sub">126</span></div></div></li>
									<li><div class="vbox" id="stage2S127"><div class="velement">127</div><div>S<span class="sub">127</span></div></div></li>
									<li><div class="vbox" id="stage2S128"><div class="velement">128</div><div>S<span class="sub">128</span></div></div></li>
									<li><div class="vbox" id="stage2S129"><div class="velement">129</div><div>S<span class="sub">129</span></div></div></li>
									<li><div class="vbox" id="stage2S130"><div class="velement">130</div><div>S<span class="sub">130</span></div></div></li>
									<li><div class="vbox" id="stage2S131"><div class="velement">131</div><div>S<span class="sub">131</span></div></div></li>
									<li><div class="vbox" id="stage2S132"><div class="velement">132</div><div>S<span class="sub">132</span></div></div></li>
									<li><div class="vbox" id="stage2S133"><div class="velement">133</div><div>S<span class="sub">133</span></div></div></li>
									<li><div class="vbox" id="stage2S134"><div class="velement">134</div><div>S<span class="sub">134</span></div></div></li>
									<li><div class="vbox" id="stage2S135"><div class="velement">135</div><div>S<span class="sub">135</span></div></div></li>
									<li><div class="vbox" id="stage2S136"><div class="velement">136</div><div>S<span class="sub">136</span></div></div></li>
									<li><div class="vbox" id="stage2S137"><div class="velement">137</div><div>S<span class="sub">137</span></div></div></li>
									<li><div class="vbox" id="stage2S138"><div class="velement">138</div><div>S<span class="sub">138</span></div></div></li>
									<li><div class="vbox" id="stage2S139"><div class="velement">139</div><div>S<span class="sub">139</span></div></div></li>
									<li><div class="vbox" id="stage2S140"><div class="velement">140</div><div>S<span class="sub">140</span></div></div></li>
									<li><div class="vbox" id="stage2S141"><div class="velement">141</div><div>S<span class="sub">141</span></div></div></li>
									<li><div class="vbox" id="stage2S142"><div class="velement">142</div><div>S<span class="sub">142</span></div></div></li>
									<li><div class="vbox" id="stage2S143"><div class="velement">143</div><div>S<span class="sub">143</span></div></div></li>
									<li><div class="vbox" id="stage2S144"><div class="velement">144</div><div>S<span class="sub">144</span></div></div></li>
									<li><div class="vbox" id="stage2S145"><div class="velement">145</div><div>S<span class="sub">145</span></div></div></li>
									<li><div class="vbox" id="stage2S146"><div class="velement">146</div><div>S<span class="sub">146</span></div></div></li>
									<li><div class="vbox" id="stage2S147"><div class="velement">147</div><div>S<span class="sub">147</span></div></div></li>
									<li><div class="vbox" id="stage2S148"><div class="velement">148</div><div>S<span class="sub">148</span></div></div></li>
									<li><div class="vbox" id="stage2S149"><div class="velement">149</div><div>S<span class="sub">149</span></div></div></li>
									<li><div class="vbox" id="stage2S150"><div class="velement">150</div><div>S<span class="sub">150</span></div></div></li>
									<li><div class="vbox" id="stage2S151"><div class="velement">151</div><div>S<span class="sub">151</span></div></div></li>
									<li><div class="vbox" id="stage2S152"><div class="velement">152</div><div>S<span class="sub">152</span></div></div></li>
									<li><div class="vbox" id="stage2S153"><div class="velement">153</div><div>S<span class="sub">153</span></div></div></li>
									<li><div class="vbox" id="stage2S154"><div class="velement">154</div><div>S<span class="sub">154</span></div></div></li>
									<li><div class="vbox" id="stage2S155"><div class="velement">155</div><div>S<span class="sub">155</span></div></div></li>
									<li><div class="vbox" id="stage2S156"><div class="velement">156</div><div>S<span class="sub">156</span></div></div></li>
									<li><div class="vbox" id="stage2S157"><div class="velement">157</div><div>S<span class="sub">157</span></div></div></li>
									<li><div class="vbox" id="stage2S158"><div class="velement">158</div><div>S<span class="sub">158</span></div></div></li>
									<li><div class="vbox" id="stage2S159"><div class="velement">159</div><div>S<span class="sub">159</span></div></div></li>
									<li><div class="vbox" id="stage2S160"><div class="velement">160</div><div>S<span class="sub">160</span></div></div></li>
									<li><div class="vbox" id="stage2S161"><div class="velement">161</div><div>S<span class="sub">161</span></div></div></li>
									<li><div class="vbox" id="stage2S162"><div class="velement">162</div><div>S<span class="sub">162</span></div></div></li>
									<li><div class="vbox" id="stage2S163"><div class="velement">163</div><div>S<span class="sub">163</span></div></div></li>
									<li><div class="vbox" id="stage2S164"><div class="velement">164</div><div>S<span class="sub">164</span></div></div></li>
									<li><div class="vbox" id="stage2S165"><div class="velement">165</div><div>S<span class="sub">165</span></div></div></li>
									<li><div class="vbox" id="stage2S166"><div class="velement">166</div><div>S<span class="sub">166</span></div></div></li>
									<li><div class="vbox" id="stage2S167"><div class="velement">167</div><div>S<span class="sub">167</span></div></div></li>
									<li><div class="vbox" id="stage2S168"><div class="velement">168</div><div>S<span class="sub">168</span></div></div></li>
									<li><div class="vbox" id="stage2S169"><div class="velement">169</div><div>S<span class="sub">169</span></div></div></li>
									<li><div class="vbox" id="stage2S170"><div class="velement">170</div><div>S<span class="sub">170</span></div></div></li>
									<li><div class="vbox" id="stage2S171"><div class="velement">171</div><div>S<span class="sub">171</span></div></div></li>
									<li><div class="vbox" id="stage2S172"><div class="velement">172</div><div>S<span class="sub">172</span></div></div></li>
									<li><div class="vbox" id="stage2S173"><div class="velement">173</div><div>S<span class="sub">173</span></div></div></li>
									<li><div class="vbox" id="stage2S174"><div class="velement">174</div><div>S<span class="sub">174</span></div></div></li>
									<li><div class="vbox" id="stage2S175"><div class="velement">175</div><div>S<span class="sub">175</span></div></div></li>
									<li><div class="vbox" id="stage2S176"><div class="velement">176</div><div>S<span class="sub">176</span></div></div></li>
									<li><div class="vbox" id="stage2S177"><div class="velement">177</div><div>S<span class="sub">177</span></div></div></li>
									<li><div class="vbox" id="stage2S178"><div class="velement">178</div><div>S<span class="sub">178</span></div></div></li>
									<li><div class="vbox" id="stage2S179"><div class="velement">179</div><div>S<span class="sub">179</span></div></div></li>
									<li><div class="vbox" id="stage2S180"><div class="velement">180</div><div>S<span class="sub">180</span></div></div></li>
									<li><div class="vbox" id="stage2S181"><div class="velement">181</div><div>S<span class="sub">181</span></div></div></li>
									<li><div class="vbox" id="stage2S182"><div class="velement">182</div><div>S<span class="sub">182</span></div></div></li>
									<li><div class="vbox" id="stage2S183"><div class="velement">183</div><div>S<span class="sub">183</span></div></div></li>
									<li><div class="vbox" id="stage2S184"><div class="velement">184</div><div>S<span class="sub">184</span></div></div></li>
									<li><div class="vbox" id="stage2S185"><div class="velement">185</div><div>S<span class="sub">185</span></div></div></li>
									<li><div class="vbox" id="stage2S186"><div class="velement">186</div><div>S<span class="sub">186</span></div></div></li>
									<li><div class="vbox" id="stage2S187"><div class="velement">187</div><div>S<span class="sub">187</span></div></div></li>
									<li><div class="vbox" id="stage2S188"><div class="velement">188</div><div>S<span class="sub">188</span></div></div></li>
									<li><div class="vbox" id="stage2S189"><div class="velement">189</div><div>S<span class="sub">189</span></div></div></li>
									<li><div class="vbox" id="stage2S190"><div class="velement">190</div><div>S<span class="sub">190</span></div></div></li>
									<li><div class="vbox" id="stage2S191"><div class="velement">191</div><div>S<span class="sub">191</span></div></div></li>
									<li><div class="vbox" id="stage2S192"><div class="velement">192</div><div>S<span class="sub">192</span></div></div></li>
									<li><div class="vbox" id="stage2S193"><div class="velement">193</div><div>S<span class="sub">193</span></div></div></li>
									<li><div class="vbox" id="stage2S194"><div class="velement">194</div><div>S<span class="sub">194</span></div></div></li>
									<li><div class="vbox" id="stage2S195"><div class="velement">195</div><div>S<span class="sub">195</span></div></div></li>
									<li><div class="vbox" id="stage2S196"><div class="velement">196</div><div>S<span class="sub">196</span></div></div></li>
									<li><div class="vbox" id="stage2S197"><div class="velement">197</div><div>S<span class="sub">197</span></div></div></li>
									<li><div class="vbox" id="stage2S198"><div class="velement">198</div><div>S<span class="sub">198</span></div></div></li>
									<li><div class="vbox" id="stage2S199"><div class="velement">199</div><div>S<span class="sub">199</span></div></div></li>
									<li><div class="vbox" id="stage2S200"><div class="velement">200</div><div>S<span class="sub">200</span></div></div></li>
									<li><div class="vbox" id="stage2S201"><div class="velement">201</div><div>S<span class="sub">201</span></div></div></li>
									<li><div class="vbox" id="stage2S202"><div class="velement">202</div><div>S<span class="sub">202</span></div></div></li>
									<li><div class="vbox" id="stage2S203"><div class="velement">203</div><div>S<span class="sub">203</span></div></div></li>
									<li><div class="vbox" id="stage2S204"><div class="velement">204</div><div>S<span class="sub">204</span></div></div></li>
									<li><div class="vbox" id="stage2S205"><div class="velement">205</div><div>S<span class="sub">205</span></div></div></li>
									<li><div class="vbox" id="stage2S206"><div class="velement">206</div><div>S<span class="sub">206</span></div></div></li>
									<li><div class="vbox" id="stage2S207"><div class="velement">207</div><div>S<span class="sub">207</span></div></div></li>
									<li><div class="vbox" id="stage2S208"><div class="velement">208</div><div>S<span class="sub">208</span></div></div></li>
									<li><div class="vbox" id="stage2S209"><div class="velement">209</div><div>S<span class="sub">209</span></div></div></li>
									<li><div class="vbox" id="stage2S210"><div class="velement">210</div><div>S<span class="sub">210</span></div></div></li>
									<li><div class="vbox" id="stage2S211"><div class="velement">211</div><div>S<span class="sub">211</span></div></div></li>
									<li><div class="vbox" id="stage2S212"><div class="velement">212</div><div>S<span class="sub">212</span></div></div></li>
									<li><div class="vbox" id="stage2S213"><div class="velement">213</div><div>S<span class="sub">213</span></div></div></li>
									<li><div class="vbox" id="stage2S214"><div class="velement">214</div><div>S<span class="sub">214</span></div></div></li>
									<li><div class="vbox" id="stage2S215"><div class="velement">215</div><div>S<span class="sub">215</span></div></div></li>
									<li><div class="vbox" id="stage2S216"><div class="velement">216</div><div>S<span class="sub">216</span></div></div></li>
									<li><div class="vbox" id="stage2S217"><div class="velement">217</div><div>S<span class="sub">217</span></div></div></li>
									<li><div class="vbox" id="stage2S218"><div class="velement">218</div><div>S<span class="sub">218</span></div></div></li>
									<li><div class="vbox" id="stage2S219"><div class="velement">219</div><div>S<span class="sub">219</span></div></div></li>
									<li><div class="vbox" id="stage2S220"><div class="velement">220</div><div>S<span class="sub">220</span></div></div></li>
									<li><div class="vbox" id="stage2S221"><div class="velement">221</div><div>S<span class="sub">221</span></div></div></li>
									<li><div class="vbox" id="stage2S222"><div class="velement">222</div><div>S<span class="sub">222</span></div></div></li>
									<li><div class="vbox" id="stage2S223"><div class="velement">223</div><div>S<span class="sub">223</span></div></div></li>
									<li><div class="vbox" id="stage2S224"><div class="velement">224</div><div>S<span class="sub">224</span></div></div></li>
									<li><div class="vbox" id="stage2S225"><div class="velement">225</div><div>S<span class="sub">225</span></div></div></li>
									<li><div class="vbox" id="stage2S226"><div class="velement">226</div><div>S<span class="sub">226</span></div></div></li>
									<li><div class="vbox" id="stage2S227"><div class="velement">227</div><div>S<span class="sub">227</span></div></div></li>
									<li><div class="vbox" id="stage2S228"><div class="velement">228</div><div>S<span class="sub">228</span></div></div></li>
									<li><div class="vbox" id="stage2S229"><div class="velement">229</div><div>S<span class="sub">229</span></div></div></li>
									<li><div class="vbox" id="stage2S230"><div class="velement">230</div><div>S<span class="sub">230</span></div></div></li>
									<li><div class="vbox" id="stage2S231"><div class="velement">231</div><div>S<span class="sub">231</span></div></div></li>
									<li><div class="vbox" id="stage2S232"><div class="velement">232</div><div>S<span class="sub">232</span></div></div></li>
									<li><div class="vbox" id="stage2S233"><div class="velement">233</div><div>S<span class="sub">233</span></div></div></li>
									<li><div class="vbox" id="stage2S234"><div class="velement">234</div><div>S<span class="sub">234</span></div></div></li>
									<li><div class="vbox" id="stage2S235"><div class="velement">235</div><div>S<span class="sub">235</span></div></div></li>
									<li><div class="vbox" id="stage2S236"><div class="velement">236</div><div>S<span class="sub">236</span></div></div></li>
									<li><div class="vbox" id="stage2S237"><div class="velement">237</div><div>S<span class="sub">237</span></div></div></li>
									<li><div class="vbox" id="stage2S238"><div class="velement">238</div><div>S<span class="sub">238</span></div></div></li>
									<li><div class="vbox" id="stage2S239"><div class="velement">239</div><div>S<span class="sub">239</span></div></div></li>
									<li><div class="vbox" id="stage2S240"><div class="velement">240</div><div>S<span class="sub">240</span></div></div></li>
									<li><div class="vbox" id="stage2S241"><div class="velement">241</div><div>S<span class="sub">241</span></div></div></li>
									<li><div class="vbox" id="stage2S242"><div class="velement">242</div><div>S<span class="sub">242</span></div></div></li>
									<li><div class="vbox" id="stage2S243"><div class="velement">243</div><div>S<span class="sub">243</span></div></div></li>
									<li><div class="vbox" id="stage2S244"><div class="velement">244</div><div>S<span class="sub">244</span></div></div></li>
									<li><div class="vbox" id="stage2S245"><div class="velement">245</div><div>S<span class="sub">245</span></div></div></li>
									<li><div class="vbox" id="stage2S246"><div class="velement">246</div><div>S<span class="sub">246</span></div></div></li>
									<li><div class="vbox" id="stage2S247"><div class="velement">247</div><div>S<span class="sub">247</span></div></div></li>
									<li><div class="vbox" id="stage2S248"><div class="velement">248</div><div>S<span class="sub">248</span></div></div></li>
									<li><div class="vbox" id="stage2S249"><div class="velement">249</div><div>S<span class="sub">249</span></div></div></li>
									<li><div class="vbox" id="stage2S250"><div class="velement">250</div><div>S<span class="sub">250</span></div></div></li>
									<li><div class="vbox" id="stage2S251"><div class="velement">251</div><div>S<span class="sub">251</span></div></div></li>
									<li><div class="vbox" id="stage2S252"><div class="velement">252</div><div>S<span class="sub">252</span></div></div></li>

								</ul> 
						</div>
						<div class="vbox" id="stage2S253"><div class="velement">253</div><div>S<span class="sub">253</span></div></div>
						<div class="vbox" id="stage2S254"><div class="velement">254</div><div>S<span class="sub">254</span></div></div>
						<div class="vbox" id="stage2S255"><div class="velement">255</div><div>S<span class="sub">255</span></div></div>
						</div>
						<div class="velement zindex2" id="swapslot1"></div>
						<div class="velement zindex2" id="swapslot2"></div>
					
					<div class="clear"> </div>

					<p>Temporary vector T (initiated): </p>	
					<div id='tvalue2' name='tvalue2' class="zindex1"></div>
					
					<script type="text/javascript">
						fillt("tvalue2", true);  
					</script>

					<div class="clear"> </div>	
					<!--- <p id="test1"></p>
					<p id="test2"></p>
					<p id="test3"></p>
					<p id="test4"></p> --->
				</div>

				<div class="gridelement5">	
					<button type="button" class='question'>?</button>
					<p class="descriptionbox">
						In Stage 2, every S element is swapped with another S element according to a scheme dictated by T (For more details, <a class="italic">PLAY</a> the animation). <br><br>
						The operation starts from S[0] and ends at S[255]. There are <a class="italic">256</a> rounds in total. 
					</p>
					<script type="text/javascript">
						var question1 = document.getElementsByClassName("question")[1];
						var descriptionbox1 = document.getElementsByClassName("descriptionbox")[1];
						function answer(){
							if( descriptionbox1.style.opacity == "1"){
								descriptionbox1.style.opacity = "0";
							} 
							else {descriptionbox1.style.opacity = "1";}		
						}
			    		question1.addEventListener("click", answer, false);    
					</script>
				</div>

				<script>
					var stage2counter = document.getElementsByClassName("stage2counter")[0];
					var stage2step1 = document.getElementsByClassName("stage2step1")[0];
					var stage2step2 = document.getElementsByClassName("stage2step2")[0];
					var stage2step3 = document.getElementsByClassName("stage2step3")[0];
					var stage2step4 = document.getElementsByClassName("stage2step4")[0];
					var stage2step5 = document.getElementsByClassName("stage2step5")[0];
					var stage2step6 = document.getElementsByClassName("stage2step6")[0];
					var stage2step7 = document.getElementsByClassName("stage2step7")[0];
					var stage2step8 = document.getElementsByClassName("stage2step8")[0];
					var stage2step9 = document.getElementsByClassName("stage2step9")[0];
					var stage2step10 = document.getElementsByClassName("stage2step10")[0];
					var stage2items = [stage2counter, stage2step1, stage2step2, stage2step3, stage2step4, stage2step5, stage2step6, stage2step7, stage2step8, stage2step9, stage2step10];
					var stage2anims = ["stage2counteranim", "stage2highlight1s", "stage2highlight1s", "stage2highlight3s", "stage2highlight2s"];
					var backbutton = document.getElementById("backbutton");
					var togglebutton = document.getElementById("togglebutton");
					var forwardbutton = document.getElementById("stepforthbutton");
					var completebutton = document.getElementById("forthbutton");

					var autoplay = false;
					var roundcounter = parseInt(stage2counter.textContent); 
					var stepcounter = 0;  // step 1 to 4, back and forth
					var tempvari = 0;   // used in stage2step10i(),  tracks temporary variable i
					var swapstart = false;  // checks if step9swap starts
					var stage2recordsi = [];
					var stage2recordsj = [];

					document.getElementById("stage2vectorti").innerHTML = document.getElementById("stage2T0").firstChild.textContent;

					function recordswap(siindex, sjindex){
						var lastsi = stage2recordsi[stage2recordsi.length - 1];
						var lastsj = stage2recordsj[stage2recordsj.length - 1];
						var test1 
						if( lastsi == siindex && lastsj ==  sjindex) { return; }
						stage2recordsi.push(siindex);
						stage2recordsj.push(sjindex);
						//document.getElementById("test1").innerHTML = stage2recordsi;
						//document.getElementById("test2").innerHTML = stage2recordsj;
					}

					function scrollanim(scrollclassname, elementindex, playanim){
						var element = document.getElementById(elementindex).firstChild;				
						function coloranim(){
							stage2addanim(true, element, playanim);
							stage2lineanimrunning(true, element);
							element.addEventListener(
								"webkitAnimationEnd", 
								function(){
									if (element.classList.contains(playanim)){ element.classList.remove(playanim);}
								} );	
						};
						hscrollto(scrollclassname, elementindex, coloranim);	
					}
					
					function hscrollto(scrollclassname, elementindex, callback){
						var elementoffset = $("#"+elementindex).offset().left ;
						var defaultSoffset = 0;
						if( scrollclassname == "hscrollS"){
							defaultSoffset = $("#stage2S7").first().offset().left;}
						else if( scrollclassname == "hscrollT"){
							defaultSoffset = $("#stage2T7").first().offset().left;}
						if( callback == false ) {
							$("."+scrollclassname).animate( { scrollLeft:(elementoffset - defaultSoffset) }, 500);
						} else {
							$("."+scrollclassname).animate( { scrollLeft:(elementoffset - defaultSoffset) }, 500, callback());
						}							
					}

					function stage2step3j2(){
						var jvalue1 = parseInt(document.getElementById("jvalue1").textContent);
						var jvalue2 = parseInt(document.getElementById("jvalue2").textContent);
						$("#jvalue2").prop('number', jvalue1);  // change number by 1
						$("#jvalue2").animateNumber( { number: jvalue1 }, 'linear', stage2step3i() );
					}

					function stage2step3i(){
						var ivalue1 = parseInt(document.getElementById("ivalue1").textContent);
						var ivalue2 = parseInt(document.getElementById("ivalue2").textContent);
						$("#ivalue2").prop('number', ivalue2);
						$("#ivalue2").animateNumber( { number: ivalue1 }, "linear" );
						$("#ivalue3").prop('number', ivalue2);
						$("#ivalue3").animateNumber( { number: ivalue1 }, "linear" );
						var indexSi = "stage2S"+ivalue1; 
						var elementSi = document.getElementById(indexSi);
						var indexTi = "stage2T"+ivalue1;
						var elementTi = document.getElementById(indexTi);
						scrollanim("hscrollS", indexSi, "vectorred");
						scrollanim("hscrollT", indexTi, "vectorred");
						elementSi.addEventListener(
							"webkitAnimationStart", 
							stage2step3SiTi(),
							 true
						);
					}

					function stage2step3SiTi(){
						var ivalue1 = document.getElementById("ivalue1").textContent;
						var si = parseInt(document.getElementById("stage2S" + ivalue1).firstChild.textContent);
						var ti = parseInt(document.getElementById("stage2T" + ivalue1).firstChild.textContent);		
						$("#stage2vectorsi").prop('number', si); 
						$("#stage2vectorsi").delay(1000).animateNumber( { number: si }, 'linear');
						$("#stage2vectorti").prop('number', ti); 
						$("#stage2vectorti").delay(1000).animateNumber( { number: ti }, 'linear');
					}

					function stage2step4j3(){
						var jvalue1 = document.getElementById("jvalue1").textContent;
						var ivalue3 = document.getElementById("ivalue3").textContent;		
						$("#jvalue3").prop('number', jvalue1); 
						$("#jvalue3").animateNumber( { number: jvalue1 }, 'linear');
					}

					function stage2step5j4part1(){
						var jvalue1 = document.getElementById("jvalue1").textContent;
						var ivalue1 = document.getElementById("ivalue1").textContent;
						var si = document.getElementById("stage2S" + ivalue1).firstChild.textContent;
						var ti = document.getElementById("stage2T" + ivalue1).firstChild.textContent;
						var jvalue4 = (parseInt(jvalue1) + parseInt(si) + parseInt(ti) ) % 256;
						$("#jvalue4").prop('number', jvalue4);
						$("#jvalue4").animateNumber( { number: jvalue4 }, "linear", stage2step5j4part2(jvalue1, jvalue4) );
					}

					function stage2step5j4part2(jvalue1, jvalue4){
						$("#jvalue1").prop('number', jvalue1);
						$("#jvalue1").animateNumber( { number:jvalue4 }, "linear");
					}

					function stage2step6j(){
						var sindex = parseInt($("#jvalue4").text()) ;
						$("#jvalue5").prop('number', sindex);
						$("#jvalue5").animateNumber( { number:sindex }, "linear", stage2Sj(sindex));
					}

					function stage2Sj(sindex){
						var sj = document.getElementById("stage2S" + sindex).firstChild.textContent;
						$("#step6Sj").prop('number', sj);
						$("#step6Sj").animateNumber( { number:sj }, "linear");
					}

					function stage2step8i(){
						var ivalue4 = parseInt($("#ivalue1").text()) ;
						$("#ivalue4").prop('number', ivalue4);
						$("#ivalue4").animateNumber( { number: ivalue4 }, "linear", stage2Si(ivalue4));
					}

					function stage2Si(sindex){
						var si =  document.getElementById("stage2S" + sindex).firstChild.textContent;
						$("#step6Si").prop('number', si);
						$("#step6Si").animateNumber( { number:si }, "linear");
					}

					function stage2step9i(){
						var ivalue5 = parseInt($("#ivalue1").text()) ;
						$("#ivalue5").prop('number', ivalue5);
						$("#ivalue5").animateNumber( { number:ivalue5 }, "linear", stage2step9j());
					}

					function stage2step9j(){
						var jvalue6 = parseInt($("#jvalue4").text()) ;
						$("#jvalue6").prop('number', jvalue6);
						$("#jvalue6").animateNumber( { number:jvalue6 }, "linear", stage2swapstep1());
					}

					function swapElements(el1, el2) {
    					// create marker element and insert it where obj1 is
    					var temp = document.createElement("div");
					    el1.parentNode.insertBefore(temp, el1);
					    // move obj1 to right before obj2
					    el2.parentNode.insertBefore(el1, el2);
					    // move obj2 to right before where obj1 used to be
					    temp.parentNode.insertBefore(el2, temp);
					    // remove temporary marker node
					    temp.parentNode.removeChild(temp);
					}

					function stage2swapstep1(){
						if(!swapstart){
							var siid = document.getElementById("ivalue1").textContent;
							var sjid = document.getElementById("jvalue1").textContent;
							stage2step9siid = "stage2S" + siid;  // id: stage2Si
							stage2step9sjid = "stage2S" + sjid;  // id: stage2Sj
							stage2step9si = document.getElementById(stage2step9siid).firstChild;           // object S[i]
							stage2step9sj = document.getElementById(stage2step9sjid).firstChild;	       // object: S[j]
							stage2step9sivalue = parseInt(stage2step9si.textContent);                      // S[i] numeric value
							stage2step9sjvalue = parseInt(stage2step9sj.textContent);                      // S[j] numeric value
							var sileft = $("#" + stage2step9siid).first().offset().left;            
							var sjleft = $("#" + stage2step9sjid).first().offset().left;  
							var swapslot1 = document.getElementById("swapslot1") ;                     // swapslot1 object
							var swapslot2 = document.getElementById("swapslot2") ;                     // swapslot2 object
							var swapslot1left = $("#swapslot1").offset().left;                         // swapslot1 leftOffset
							var swapslot2left = $("#swapslot2").offset().left;                         // swapslot2 leftOffset
							var defaultSoffset = $("#stage2S7").first().offset().left;
							var S248offset = $("#stage2S248").first().offset().left;
							var tempdistance = 0; 
							recordswap(siid, sjid);

							if ( siid <= 7 ) {
								$("#swapslot1").offset({ left:sileft + 5 });
								tempdistance = defaultSoffset - sileft ;

								if ( sjid <= 7 ) {
									tempdistance = sjleft - sileft ;
								}
								else if ( sjid >= 249) {
									tempdistance = S248offset - sjleft + 39;
								}
							}

							else if ( siid >= 249 ) {
								$("#swapslot1").offset({ left:sileft + 5 });
								tempdistance = defaultSoffset - sileft ;

								if ( sjid <= 7 ) {
									tempdistance = sjleft - sileft ;
								}
								else if ( sjid >= 249) {
									tempdistance = S248offset - sjleft + 39;
									}
								}


							swapslot1.innerHTML = stage2step9sivalue;
							stage2step9si.style.opacity = "0";
							swapslot1.style.opacity = "1";
							
							var swapslot1anim1 = swapslot1.animate( [
								{
									transform:"translateY(0px) translateX(0px)"
								},
								{
									transform:"translateY(0px) translateX(0px)"
								},
								{
									transform:"translateY(-50px) translateX(0px)"
								}, {
									transform:"translateY(-50px) translateX("  +  tempdistance  + "px)"
								}], {
									duration: 1000,
									direction: "normal",
									fill: "forwards",
									easing:"linear"
								}
							);
							var swapslot2anim1 = swapslot2.animate(
								[{
									transform:"translateY(0px) translateX(0px)"
								}, {
									transform:"translateY(0px) translateX(0px)"
								}, {
									transform:"translateY(50px) translateX(0px)"
								}, {
									transform:"translateY(50px) translateX(40px)"
								}],{
									duration: 1000,
									direction:"normal",
									fill:"forwards",
									easing:"linear"
								});
							swapslot2anim1.pause();
								
							swapslot1anim1.addEventListener("finish", function(){scrolltosj();});
							function scrolltosj(){									
								$(".hscrollS").first().animate(
									{ scrollLeft:( sjleft - defaultSoffset) }, 
									500, 
									function(){
										sjleft = $("#" + stage2step9sjid).first().offset().left;
										$("#swapslot2").offset({left: sjleft + 5 });
										swapslot2.innerHTML = stage2step9sjvalue;
										stage2step9sj.style.opacity = "0";
										swapslot2.style.opacity = "1";
										swapslot2anim1.play();
										} 
									);
								};
			
							swapslot2anim1.addEventListener("finish", function(){swaptosj();});
							function swaptosj(){
								var swapslot1anim2 = swapslot1.animate(
									[ {
										transform: "translateY(-50px) translateX("  +  tempdistance   + "px)"
									},{
										transform: "translateY(-50px) translateX("  +  tempdistance   + "px)"
									},{
										transform: "translateY(0px) translateX("  +  tempdistance   + "px)"
									} ], {
										duration: 1000,
										fill:"forwards"
									});
								
								swapslot1anim2.addEventListener("finish", function(){
									stage2step9sj.innerHTML = stage2step9sivalue;
									stage2step9sj.style.opacity = "1";
									swapslot1.style.opacity = "0";
									scrolltosi();});
							};

							function scrolltosi(){
								$(".hscrollS").first().delay(200).animate(
									{ scrollLeft:( sileft - defaultSoffset) }, 
									500,
									function(){
										sileft = $("#" + stage2step9siid).first().offset().left;
										swapslot2left = $("#swapslot2").offset().left;
										var temp2 = sileft - swapslot2left + 5 + 39 ; 
										var swapslot2anim2 = swapslot2.animate(
											[ {
												transform: "translateY(50px) translateX(40px)"
											},{
												transform: "translateY(50px) translateX(40px)"
											},{
												transform: "translateY(50px) translateX("+ temp2 +"px)"
											},{
												transform: "translateY(0px) translateX("+ temp2 +"px)"
											}],{
												duration: 1000,
												fill:"forwards"
											}
										);
										swapslot2anim2.addEventListener("finish", 
											function(){
												stage2step9si.innerHTML = stage2step9sjvalue;
												stage2step9si.style.opacity = "1";
												swapslot2.style.opacity = "0";	
												swapslot1.animate([{
													transform: " translateX("  +  tempdistance   + "px)"
												}, {
													transform: " translateX(0px)"
												}],{
													duration: 100,
													fill:"forwards"
												});												
										} );
									}
								)
							};
							}
					}

					function stage2step10i(){
						var beforestep10 = tempvari;
						// condition necessary, pause/run may call this function multiple times
						if(tempvari == roundcounter){	tempvari += 1; }   
						$("#ivalue1").prop('number', beforestep10);
						$("#ivalue1").animateNumber( { number: tempvari }, "slow");
					}

					function stage2addanim(add, itemx, animx){
						if(add && (!itemx.classList.contains(animx) )) { 
							itemx.classList.add(animx); 
						}
						else if ((!add) && itemx.classList.contains(animx) ) { 
								itemx.classList.remove(animx); 
								stepincre();
						}
					}

					function stage2lineanimrunning(running, itemx){   
						if(running) { itemx.style.animationPlayState = "running"; }
						else { itemx.style.animationPlayState = "paused"; }
					}	

					//  current anim ends, remove its anim-triggering class. clean element for next round
					function checkanimend(itemx, animx){ itemx.addEventListener("webkitAnimationEnd", function(){stage2addanim(false, itemx, animx); }, true); }

					// incre stepcounter, move on to next step
					// call pauserunanim which calls itself, form a loop
					function stepincre(){ stepcounter = stepcounter + 1; pauserunanim(); }

					function pauserunanim(){    // loop, pause/run the stage2 animation
						if ( stepcounter >= 11 ){ 
							stepcounter = 0;   
							roundcounter += 1;
							if( roundcounter >=256){
								stage3updateS();
								alert("Initial Permutation of S is done.");
								return;
							} 
							stage2counter.innerHTML = roundcounter;
						}
						var playitem = stage2items[stepcounter];
						if(autoplay) {							
							if ( stepcounter <= 4) { var playanim = stage2anims[stepcounter];}
							else if ( stepcounter == 9) { var playanim = "stage2highlight6s";}
							else {	var playanim = stage2anims[1];	}
							stage2addanim(true, playitem, playanim);   // add paused anim to CLEAN el
							stage2lineanimrunning(true, playitem);     // set anim running
							//---special effects for j, i, Sj, Si calculations---
							switch(stepcounter){
								case 3: stage2step3j2(); break;
								case 4: stage2step4j3(); break;
								case 5: stage2step5j4part1(); break;
								case 6: stage2step6j(); break;
								case 8: stage2step8i(); break;
								case 9: stage2step9i(); break;
								case 10: swapstart = false;stage2step10i(); break;
								default: break;
							}
							//------
							// remove anim, move to next step
							checkanimend(playitem, playanim);  
						}
						else {
							stage2lineanimrunning(false, playitem);	
							if(stepcounter == 3 ){
								var indexi = document.getElementById("ivalue1").textContent;
								var elementSi = document.getElementById( "stage2S"+indexi ).firstChild;
								var elementTi =  document.getElementById( "stage2T"+indexi ).firstChild;
								if( elementSi.classList.contains("vectorred") ){
									stage2lineanimrunning(false, elementSi);	
								}
								if( elementTi.classList.contains("vectorred") ){
									stage2lineanimrunning(false, elementTi);	
								}
							}
						}
					}
					
					function togglebuttonvaluechange() {	// respond to user pause/play the animation
						if( roundcounter >= 256){togglebutton.innerHTML = "END"; }
						else if (!autoplay && (roundcounter < 256)){ 							
							togglebutton.innerHTML = "PAUSE"; 
							autoplay = true;
							pauserunanim();
							}
							
						else if (autoplay && (roundcounter < 256)){
							togglebutton.innerHTML = "PLAY";
							autoplay = false;
							pauserunanim();	
							}
					}

					function stage2complete(){
						var tempi1 = 0;
						var tempj1 = 0;
						stage2recordsi = [];
						stage2recordsj = [];
						var svector = [];
						for( i=0; i< 256; i++ ){
							sivalue = parseInt(document.getElementById("stage2S"+tempi1).firstChild.textContent);
							tivalue = parseInt(document.getElementById("stage2T"+tempi1).firstChild.textContent);
							tempj2 = ( tempj1 + sivalue + tivalue ) % 256 ;
							siel = document.getElementById("stage2S"+tempi1).firstChild;
							sjel = document.getElementById("stage2S"+tempj2).firstChild;
							swapElements(siel, sjel);
							recordswap(tempi1, tempj2);	
							if( i == 255){
								autoplay = false;
								stage2counter.innerHTML = 255;
								roundcounter = 256;
								tempvari = 256;
								stepcounter = 10;
								document.getElementById("ivalue1").innerHTML = 255;
								document.getElementById("ivalue2").innerHTML = 255;
								document.getElementById("ivalue3").innerHTML = 255;
								document.getElementById("ivalue4").innerHTML = 255;
								document.getElementById("ivalue5").innerHTML = 255;

								document.getElementById("jvalue1").innerHTML = tempj1;
								document.getElementById("jvalue2").innerHTML = tempj1;	
								document.getElementById("jvalue3").innerHTML = tempj1;
								document.getElementById("jvalue4").innerHTML = tempj2;
								document.getElementById("jvalue5").innerHTML = tempj2;
								document.getElementById("jvalue6").innerHTML = tempj2;

								document.getElementById("stage2vectorsi").innerHTML = sivalue;
								document.getElementById("stage2vectorti").innerHTML = tivalue;
								document.getElementById("step6Sj").innerHTML = sjel.textContent;
								document.getElementById("step6Si").innerHTML = siel.textContent;
							}						
							
							tempj1 = tempj2 ;
							tempi1 += 1;
						};
						stage3updateS();						
					}

					function stage2reset(){
						var stage2S = "stage2S" ;
						var sivalue = 0;
						for( i=0; i<256; i++){
							document.getElementById(stage2S + i).firstChild.innerHTML = i;
						}
						stage2counter.innerHTML = 0;
						togglebutton.innerHTML = "PLAY";
						autoplay = false;
						roundcounter = parseInt(stage2counter.textContent); 
						stepcounter = 0;  
						tempvari = 0;   
						swapstart = false; 
						stage2recordsi = [];
						stage2recordsj = [];

						document.getElementById("ivalue1").innerHTML = 0;
						document.getElementById("ivalue2").innerHTML = "i";
						document.getElementById("ivalue3").innerHTML = "i";
						document.getElementById("ivalue4").innerHTML = "i";
						document.getElementById("ivalue5").innerHTML = "i";

						document.getElementById("jvalue1").innerHTML = 0;
						document.getElementById("jvalue2").innerHTML = "j";	
						document.getElementById("jvalue3").innerHTML = 0;
						document.getElementById("jvalue4").innerHTML = 0;
						document.getElementById("jvalue5").innerHTML = "j";
						document.getElementById("jvalue6").innerHTML = "j";

						document.getElementById("stage2vectorsi").innerHTML = 0;
						document.getElementById("stage2vectorti").innerHTML = document.getElementById("stage2T0").firstChild.textContent; ;
						document.getElementById("step6Sj").innerHTML = "";
						document.getElementById("step6Si").innerHTML = "";

					}

					function completionchange(){
						if( roundcounter >= 256){
							stage2reset(); 
							completebutton.innerHTML = "COMPLETE"; }
						else { 	
							stage2reset(); 
							stage2complete();					
							completebutton.innerHTML = "RESET"; }
					}

					function stage2backward(){
						if ( roundcounter == 0 ){ 
							alert("This is the start of initial permutation of S."); return; }
						if ( roundcounter == 1 ){
							stage2reset(); return;
						}
						var sib4swap = stage2recordsi.pop() ; 
						var sjb4swap = stage2recordsj.pop() ;
						var stage2recordsjlen =  stage2recordsj.length ; 
						var last = stage2recordsjlen - 1;
						var secondlast = stage2recordsjlen - 2;						
						if ( secondlast < 0 ){ sj3swapback = 0;}
						else {var sj3swapback =  stage2recordsj[secondlast];}
						
						var si2swapback =  stage2recordsi[last];
						var sj2swapback =  stage2recordsj[last];
						
						var siel = document.getElementById("stage2S"+sib4swap).firstChild;
						var sjel = document.getElementById("stage2S"+sjb4swap).firstChild;
						var siel2swapback = document.getElementById("stage2S"+si2swapback).firstChild; 
						var sjel2swapback = document.getElementById("stage2S"+sj2swapback).firstChild; 

						var tielvalue = document.getElementById("stage2T"+si2swapback).firstChild.textContent;
						swapElements(siel, sjel);
						autoplay = false;
						roundcounter = roundcounter - 1;
						stage2counter.innerHTML = roundcounter;
						tempvari = roundcounter;
						stepcounter = 0;
						document.getElementById("ivalue1").innerHTML = sib4swap;
						document.getElementById("ivalue2").innerHTML = sib4swap - 1;
						document.getElementById("ivalue3").innerHTML = sib4swap - 1;
						document.getElementById("ivalue4").innerHTML = sib4swap - 1;
						document.getElementById("ivalue5").innerHTML = sib4swap - 1;

						document.getElementById("jvalue1").innerHTML = sj2swapback;
						document.getElementById("jvalue2").innerHTML = sj3swapback;	
						document.getElementById("jvalue3").innerHTML = sj3swapback;
						document.getElementById("jvalue4").innerHTML = sj2swapback;
						document.getElementById("jvalue5").innerHTML = sj2swapback;
						document.getElementById("jvalue6").innerHTML = sj2swapback;

						document.getElementById("stage2vectorsi").innerHTML = sjel2swapback.textContent;
						document.getElementById("stage2vectorti").innerHTML = tielvalue;
						document.getElementById("step6Sj").innerHTML = siel2swapback.textContent;
						document.getElementById("step6Si").innerHTML = sjel2swapback.textContent;
					}

					function stage2forward(){
						var currcounter = parseInt(stage2counter.textContent);
						if ( currcounter == 255 && parseInt(document.getElementById("ivalue5").textContent) == 255 ){
							alert("This is the last round of initial permutation of S.");
							return;
						}
						stage2reset();
						stage2complete();
						var amtbackstep = 255 - currcounter;
						for (i=0; i<amtbackstep; i++){stage2backward();}
					}


					togglebutton.addEventListener("click", function(){togglebuttonvaluechange()}, false);

					completebutton.addEventListener("click", function(){completionchange()}, false);

					backbutton.addEventListener("click", function(){stage2backward()}, false);

					forwardbutton.addEventListener("click", function(){stage2forward()}, false);

					
				</script>

				
			</div>

		</div>

		<div id="blankspace">--</div>

		<div id="section3">
			<h1>Stream Generation</h1>

			<div class="gridcontainer2">

				<div class="griditem7">
					<p>In Stream Generation, a pseudorandom byte is generated by selecting a S element from the 255 Selements according to the current configuration of S. Afterwards, S is permuted by swapping two S elements. This operation can generate an infinite number of pseudorandom bytes.</p>

				</div>

				<div class="bpf riditem1">
					<button type="button" id="stage3back">BACKWARD</button>
					<button type="button" id="stage3toggle">PLAY</button>
					<button type="button" id="stage3forth">FORWARD</button>
				</div>


				<div class="griditem2"> 
					<div class="stage3questionmark">
						<button type="button" class='question' onclick="stage3answer()">?</button>
						<script>
						function stage3answer() {
		    				var griditem7 = document.getElementsByClassName("griditem7")[0];
		    				if (griditem7.style.display === "block") {
		        			griditem7.style.display = "none";
		   					 } else {
		        			griditem7.style.display = "block";
		    				}
						}
						</script>
					</div>	

					<p >Vector S: </p>
					<div class="zindex1">
						<div class="vbox" id="stage3S0"><div class="velement">0</div><div>S<span class="sub">0</span></div></div>
						<div class="vbox" id="stage3S1"><div class="velement">1</div><div>S<span class="sub">1</span></div></div>
						<div class="vbox" id="stage3S2"><div class="velement">2</div><div>S<span class="sub">2</span></div></div>
						<div class="hscroll" id="hscrollS">
							<ul>
								<li><div class="vbox" id="stage3S3"><div class="velement">3</div><div>S<span class="sub">3</span></div></div></li>
								<li><div class="vbox" id="stage3S4"><div class="velement">4</div><div>S<span class="sub">4</span></div></div></li>
								<li><div class="vbox" id="stage3S5"><div class="velement">5</div><div>S<span class="sub">5</span></div></div></li>
								<li><div class="vbox" id="stage3S6"><div class="velement">6</div><div>S<span class="sub">6</span></div></div></li>
								<li><div class="vbox" id="stage3S7"><div class="velement">7</div><div>S<span class="sub">7</span></div></div></li>
								<li><div class="vbox" id="stage3S8"><div class="velement">8</div><div>S<span class="sub">8</span></div></div></li>
								<li><div class="vbox" id="stage3S9"><div class="velement">9</div><div>S<span class="sub">9</span></div></div></li>
								<li><div class="vbox" id="stage3S10"><div class="velement">10</div><div>S<span class="sub">10</span></div></div></li>
								<li><div class="vbox" id="stage3S11"><div class="velement">11</div><div>S<span class="sub">11</span></div></div></li>
								<li><div class="vbox" id="stage3S12"><div class="velement">12</div><div>S<span class="sub">12</span></div></div></li>
								<li><div class="vbox" id="stage3S13"><div class="velement">13</div><div>S<span class="sub">13</span></div></div></li>
								<li><div class="vbox" id="stage3S14"><div class="velement">14</div><div>S<span class="sub">14</span></div></div></li>
								<li><div class="vbox" id="stage3S15"><div class="velement">15</div><div>S<span class="sub">15</span></div></div></li>
								<li><div class="vbox" id="stage3S16"><div class="velement">16</div><div>S<span class="sub">16</span></div></div></li>
								<li><div class="vbox" id="stage3S17"><div class="velement">17</div><div>S<span class="sub">17</span></div></div></li>
								<li><div class="vbox" id="stage3S18"><div class="velement">18</div><div>S<span class="sub">18</span></div></div></li>
								<li><div class="vbox" id="stage3S19"><div class="velement">19</div><div>S<span class="sub">19</span></div></div></li>
								<li><div class="vbox" id="stage3S20"><div class="velement">20</div><div>S<span class="sub">20</span></div></div></li>
								<li><div class="vbox" id="stage3S21"><div class="velement">21</div><div>S<span class="sub">21</span></div></div></li>
								<li><div class="vbox" id="stage3S22"><div class="velement">22</div><div>S<span class="sub">22</span></div></div></li>
								<li><div class="vbox" id="stage3S23"><div class="velement">23</div><div>S<span class="sub">23</span></div></div></li>
								<li><div class="vbox" id="stage3S24"><div class="velement">24</div><div>S<span class="sub">24</span></div></div></li>
								<li><div class="vbox" id="stage3S25"><div class="velement">25</div><div>S<span class="sub">25</span></div></div></li>
								<li><div class="vbox" id="stage3S26"><div class="velement">26</div><div>S<span class="sub">26</span></div></div></li>
								<li><div class="vbox" id="stage3S27"><div class="velement">27</div><div>S<span class="sub">27</span></div></div></li>
								<li><div class="vbox" id="stage3S28"><div class="velement">28</div><div>S<span class="sub">28</span></div></div></li>
								<li><div class="vbox" id="stage3S29"><div class="velement">29</div><div>S<span class="sub">29</span></div></div></li>
								<li><div class="vbox" id="stage3S30"><div class="velement">30</div><div>S<span class="sub">30</span></div></div></li>
								<li><div class="vbox" id="stage3S31"><div class="velement">31</div><div>S<span class="sub">31</span></div></div></li>
								<li><div class="vbox" id="stage3S32"><div class="velement">32</div><div>S<span class="sub">32</span></div></div></li>
								<li><div class="vbox" id="stage3S33"><div class="velement">33</div><div>S<span class="sub">33</span></div></div></li>
								<li><div class="vbox" id="stage3S34"><div class="velement">34</div><div>S<span class="sub">34</span></div></div></li>
								<li><div class="vbox" id="stage3S35"><div class="velement">35</div><div>S<span class="sub">35</span></div></div></li>
								<li><div class="vbox" id="stage3S36"><div class="velement">36</div><div>S<span class="sub">36</span></div></div></li>
								<li><div class="vbox" id="stage3S37"><div class="velement">37</div><div>S<span class="sub">37</span></div></div></li>
								<li><div class="vbox" id="stage3S38"><div class="velement">38</div><div>S<span class="sub">38</span></div></div></li>
								<li><div class="vbox" id="stage3S39"><div class="velement">39</div><div>S<span class="sub">39</span></div></div></li>
								<li><div class="vbox" id="stage3S40"><div class="velement">40</div><div>S<span class="sub">40</span></div></div></li>
								<li><div class="vbox" id="stage3S41"><div class="velement">41</div><div>S<span class="sub">41</span></div></div></li>
								<li><div class="vbox" id="stage3S42"><div class="velement">42</div><div>S<span class="sub">42</span></div></div></li>
								<li><div class="vbox" id="stage3S43"><div class="velement">43</div><div>S<span class="sub">43</span></div></div></li>
								<li><div class="vbox" id="stage3S44"><div class="velement">44</div><div>S<span class="sub">44</span></div></div></li>
								<li><div class="vbox" id="stage3S45"><div class="velement">45</div><div>S<span class="sub">45</span></div></div></li>
								<li><div class="vbox" id="stage3S46"><div class="velement">46</div><div>S<span class="sub">46</span></div></div></li>
								<li><div class="vbox" id="stage3S47"><div class="velement">47</div><div>S<span class="sub">47</span></div></div></li>
								<li><div class="vbox" id="stage3S48"><div class="velement">48</div><div>S<span class="sub">48</span></div></div></li>
								<li><div class="vbox" id="stage3S49"><div class="velement">49</div><div>S<span class="sub">49</span></div></div></li>
								<li><div class="vbox" id="stage3S50"><div class="velement">50</div><div>S<span class="sub">50</span></div></div></li>
								<li><div class="vbox" id="stage3S51"><div class="velement">51</div><div>S<span class="sub">51</span></div></div></li>
								<li><div class="vbox" id="stage3S52"><div class="velement">52</div><div>S<span class="sub">52</span></div></div></li>
								<li><div class="vbox" id="stage3S53"><div class="velement">53</div><div>S<span class="sub">53</span></div></div></li>
								<li><div class="vbox" id="stage3S54"><div class="velement">54</div><div>S<span class="sub">54</span></div></div></li>
								<li><div class="vbox" id="stage3S55"><div class="velement">55</div><div>S<span class="sub">55</span></div></div></li>
								<li><div class="vbox" id="stage3S56"><div class="velement">56</div><div>S<span class="sub">56</span></div></div></li>
								<li><div class="vbox" id="stage3S57"><div class="velement">57</div><div>S<span class="sub">57</span></div></div></li>
								<li><div class="vbox" id="stage3S58"><div class="velement">58</div><div>S<span class="sub">58</span></div></div></li>
								<li><div class="vbox" id="stage3S59"><div class="velement">59</div><div>S<span class="sub">59</span></div></div></li>
								<li><div class="vbox" id="stage3S60"><div class="velement">60</div><div>S<span class="sub">60</span></div></div></li>
								<li><div class="vbox" id="stage3S61"><div class="velement">61</div><div>S<span class="sub">61</span></div></div></li>
								<li><div class="vbox" id="stage3S62"><div class="velement">62</div><div>S<span class="sub">62</span></div></div></li>
								<li><div class="vbox" id="stage3S63"><div class="velement">63</div><div>S<span class="sub">63</span></div></div></li>
								<li><div class="vbox" id="stage3S64"><div class="velement">64</div><div>S<span class="sub">64</span></div></div></li>
								<li><div class="vbox" id="stage3S65"><div class="velement">65</div><div>S<span class="sub">65</span></div></div></li>
								<li><div class="vbox" id="stage3S66"><div class="velement">66</div><div>S<span class="sub">66</span></div></div></li>
								<li><div class="vbox" id="stage3S67"><div class="velement">67</div><div>S<span class="sub">67</span></div></div></li>
								<li><div class="vbox" id="stage3S68"><div class="velement">68</div><div>S<span class="sub">68</span></div></div></li>
								<li><div class="vbox" id="stage3S69"><div class="velement">69</div><div>S<span class="sub">69</span></div></div></li>
								<li><div class="vbox" id="stage3S70"><div class="velement">70</div><div>S<span class="sub">70</span></div></div></li>
								<li><div class="vbox" id="stage3S71"><div class="velement">71</div><div>S<span class="sub">71</span></div></div></li>
								<li><div class="vbox" id="stage3S72"><div class="velement">72</div><div>S<span class="sub">72</span></div></div></li>
								<li><div class="vbox" id="stage3S73"><div class="velement">73</div><div>S<span class="sub">73</span></div></div></li>
								<li><div class="vbox" id="stage3S74"><div class="velement">74</div><div>S<span class="sub">74</span></div></div></li>
								<li><div class="vbox" id="stage3S75"><div class="velement">75</div><div>S<span class="sub">75</span></div></div></li>
								<li><div class="vbox" id="stage3S76"><div class="velement">76</div><div>S<span class="sub">76</span></div></div></li>
								<li><div class="vbox" id="stage3S77"><div class="velement">77</div><div>S<span class="sub">77</span></div></div></li>
								<li><div class="vbox" id="stage3S78"><div class="velement">78</div><div>S<span class="sub">78</span></div></div></li>
								<li><div class="vbox" id="stage3S79"><div class="velement">79</div><div>S<span class="sub">79</span></div></div></li>
								<li><div class="vbox" id="stage3S80"><div class="velement">80</div><div>S<span class="sub">80</span></div></div></li>
								<li><div class="vbox" id="stage3S81"><div class="velement">81</div><div>S<span class="sub">81</span></div></div></li>
								<li><div class="vbox" id="stage3S82"><div class="velement">82</div><div>S<span class="sub">82</span></div></div></li>
								<li><div class="vbox" id="stage3S83"><div class="velement">83</div><div>S<span class="sub">83</span></div></div></li>
								<li><div class="vbox" id="stage3S84"><div class="velement">84</div><div>S<span class="sub">84</span></div></div></li>
								<li><div class="vbox" id="stage3S85"><div class="velement">85</div><div>S<span class="sub">85</span></div></div></li>
								<li><div class="vbox" id="stage3S86"><div class="velement">86</div><div>S<span class="sub">86</span></div></div></li>
								<li><div class="vbox" id="stage3S87"><div class="velement">87</div><div>S<span class="sub">87</span></div></div></li>
								<li><div class="vbox" id="stage3S88"><div class="velement">88</div><div>S<span class="sub">88</span></div></div></li>
								<li><div class="vbox" id="stage3S89"><div class="velement">89</div><div>S<span class="sub">89</span></div></div></li>
								<li><div class="vbox" id="stage3S90"><div class="velement">90</div><div>S<span class="sub">90</span></div></div></li>
								<li><div class="vbox" id="stage3S91"><div class="velement">91</div><div>S<span class="sub">91</span></div></div></li>
								<li><div class="vbox" id="stage3S92"><div class="velement">92</div><div>S<span class="sub">92</span></div></div></li>
								<li><div class="vbox" id="stage3S93"><div class="velement">93</div><div>S<span class="sub">93</span></div></div></li>
								<li><div class="vbox" id="stage3S94"><div class="velement">94</div><div>S<span class="sub">94</span></div></div></li>
								<li><div class="vbox" id="stage3S95"><div class="velement">95</div><div>S<span class="sub">95</span></div></div></li>
								<li><div class="vbox" id="stage3S96"><div class="velement">96</div><div>S<span class="sub">96</span></div></div></li>
								<li><div class="vbox" id="stage3S97"><div class="velement">97</div><div>S<span class="sub">97</span></div></div></li>
								<li><div class="vbox" id="stage3S98"><div class="velement">98</div><div>S<span class="sub">98</span></div></div></li>
								<li><div class="vbox" id="stage3S99"><div class="velement">99</div><div>S<span class="sub">99</span></div></div></li>
								<li><div class="vbox" id="stage3S100"><div class="velement">100</div><div>S<span class="sub">100</span></div></div></li>
								<li><div class="vbox" id="stage3S101"><div class="velement">101</div><div>S<span class="sub">101</span></div></div></li>
								<li><div class="vbox" id="stage3S102"><div class="velement">102</div><div>S<span class="sub">102</span></div></div></li>
								<li><div class="vbox" id="stage3S103"><div class="velement">103</div><div>S<span class="sub">103</span></div></div></li>
								<li><div class="vbox" id="stage3S104"><div class="velement">104</div><div>S<span class="sub">104</span></div></div></li>
								<li><div class="vbox" id="stage3S105"><div class="velement">105</div><div>S<span class="sub">105</span></div></div></li>
								<li><div class="vbox" id="stage3S106"><div class="velement">106</div><div>S<span class="sub">106</span></div></div></li>
								<li><div class="vbox" id="stage3S107"><div class="velement">107</div><div>S<span class="sub">107</span></div></div></li>
								<li><div class="vbox" id="stage3S108"><div class="velement">108</div><div>S<span class="sub">108</span></div></div></li>
								<li><div class="vbox" id="stage3S109"><div class="velement">109</div><div>S<span class="sub">109</span></div></div></li>
								<li><div class="vbox" id="stage3S110"><div class="velement">110</div><div>S<span class="sub">110</span></div></div></li>
								<li><div class="vbox" id="stage3S111"><div class="velement">111</div><div>S<span class="sub">111</span></div></div></li>
								<li><div class="vbox" id="stage3S112"><div class="velement">112</div><div>S<span class="sub">112</span></div></div></li>
								<li><div class="vbox" id="stage3S113"><div class="velement">113</div><div>S<span class="sub">113</span></div></div></li>
								<li><div class="vbox" id="stage3S114"><div class="velement">114</div><div>S<span class="sub">114</span></div></div></li>
								<li><div class="vbox" id="stage3S115"><div class="velement">115</div><div>S<span class="sub">115</span></div></div></li>
								<li><div class="vbox" id="stage3S116"><div class="velement">116</div><div>S<span class="sub">116</span></div></div></li>
								<li><div class="vbox" id="stage3S117"><div class="velement">117</div><div>S<span class="sub">117</span></div></div></li>
								<li><div class="vbox" id="stage3S118"><div class="velement">118</div><div>S<span class="sub">118</span></div></div></li>
								<li><div class="vbox" id="stage3S119"><div class="velement">119</div><div>S<span class="sub">119</span></div></div></li>
								<li><div class="vbox" id="stage3S120"><div class="velement">120</div><div>S<span class="sub">120</span></div></div></li>
								<li><div class="vbox" id="stage3S121"><div class="velement">121</div><div>S<span class="sub">121</span></div></div></li>
								<li><div class="vbox" id="stage3S122"><div class="velement">122</div><div>S<span class="sub">122</span></div></div></li>
								<li><div class="vbox" id="stage3S123"><div class="velement">123</div><div>S<span class="sub">123</span></div></div></li>
								<li><div class="vbox" id="stage3S124"><div class="velement">124</div><div>S<span class="sub">124</span></div></div></li>
								<li><div class="vbox" id="stage3S125"><div class="velement">125</div><div>S<span class="sub">125</span></div></div></li>
								<li><div class="vbox" id="stage3S126"><div class="velement">126</div><div>S<span class="sub">126</span></div></div></li>
								<li><div class="vbox" id="stage3S127"><div class="velement">127</div><div>S<span class="sub">127</span></div></div></li>
								<li><div class="vbox" id="stage3S128"><div class="velement">128</div><div>S<span class="sub">128</span></div></div></li>
								<li><div class="vbox" id="stage3S129"><div class="velement">129</div><div>S<span class="sub">129</span></div></div></li>
								<li><div class="vbox" id="stage3S130"><div class="velement">130</div><div>S<span class="sub">130</span></div></div></li>
								<li><div class="vbox" id="stage3S131"><div class="velement">131</div><div>S<span class="sub">131</span></div></div></li>
								<li><div class="vbox" id="stage3S132"><div class="velement">132</div><div>S<span class="sub">132</span></div></div></li>
								<li><div class="vbox" id="stage3S133"><div class="velement">133</div><div>S<span class="sub">133</span></div></div></li>
								<li><div class="vbox" id="stage3S134"><div class="velement">134</div><div>S<span class="sub">134</span></div></div></li>
								<li><div class="vbox" id="stage3S135"><div class="velement">135</div><div>S<span class="sub">135</span></div></div></li>
								<li><div class="vbox" id="stage3S136"><div class="velement">136</div><div>S<span class="sub">136</span></div></div></li>
								<li><div class="vbox" id="stage3S137"><div class="velement">137</div><div>S<span class="sub">137</span></div></div></li>
								<li><div class="vbox" id="stage3S138"><div class="velement">138</div><div>S<span class="sub">138</span></div></div></li>
								<li><div class="vbox" id="stage3S139"><div class="velement">139</div><div>S<span class="sub">139</span></div></div></li>
								<li><div class="vbox" id="stage3S140"><div class="velement">140</div><div>S<span class="sub">140</span></div></div></li>
								<li><div class="vbox" id="stage3S141"><div class="velement">141</div><div>S<span class="sub">141</span></div></div></li>
								<li><div class="vbox" id="stage3S142"><div class="velement">142</div><div>S<span class="sub">142</span></div></div></li>
								<li><div class="vbox" id="stage3S143"><div class="velement">143</div><div>S<span class="sub">143</span></div></div></li>
								<li><div class="vbox" id="stage3S144"><div class="velement">144</div><div>S<span class="sub">144</span></div></div></li>
								<li><div class="vbox" id="stage3S145"><div class="velement">145</div><div>S<span class="sub">145</span></div></div></li>
								<li><div class="vbox" id="stage3S146"><div class="velement">146</div><div>S<span class="sub">146</span></div></div></li>
								<li><div class="vbox" id="stage3S147"><div class="velement">147</div><div>S<span class="sub">147</span></div></div></li>
								<li><div class="vbox" id="stage3S148"><div class="velement">148</div><div>S<span class="sub">148</span></div></div></li>
								<li><div class="vbox" id="stage3S149"><div class="velement">149</div><div>S<span class="sub">149</span></div></div></li>
								<li><div class="vbox" id="stage3S150"><div class="velement">150</div><div>S<span class="sub">150</span></div></div></li>
								<li><div class="vbox" id="stage3S151"><div class="velement">151</div><div>S<span class="sub">151</span></div></div></li>
								<li><div class="vbox" id="stage3S152"><div class="velement">152</div><div>S<span class="sub">152</span></div></div></li>
								<li><div class="vbox" id="stage3S153"><div class="velement">153</div><div>S<span class="sub">153</span></div></div></li>
								<li><div class="vbox" id="stage3S154"><div class="velement">154</div><div>S<span class="sub">154</span></div></div></li>
								<li><div class="vbox" id="stage3S155"><div class="velement">155</div><div>S<span class="sub">155</span></div></div></li>
								<li><div class="vbox" id="stage3S156"><div class="velement">156</div><div>S<span class="sub">156</span></div></div></li>
								<li><div class="vbox" id="stage3S157"><div class="velement">157</div><div>S<span class="sub">157</span></div></div></li>
								<li><div class="vbox" id="stage3S158"><div class="velement">158</div><div>S<span class="sub">158</span></div></div></li>
								<li><div class="vbox" id="stage3S159"><div class="velement">159</div><div>S<span class="sub">159</span></div></div></li>
								<li><div class="vbox" id="stage3S160"><div class="velement">160</div><div>S<span class="sub">160</span></div></div></li>
								<li><div class="vbox" id="stage3S161"><div class="velement">161</div><div>S<span class="sub">161</span></div></div></li>
								<li><div class="vbox" id="stage3S162"><div class="velement">162</div><div>S<span class="sub">162</span></div></div></li>
								<li><div class="vbox" id="stage3S163"><div class="velement">163</div><div>S<span class="sub">163</span></div></div></li>
								<li><div class="vbox" id="stage3S164"><div class="velement">164</div><div>S<span class="sub">164</span></div></div></li>
								<li><div class="vbox" id="stage3S165"><div class="velement">165</div><div>S<span class="sub">165</span></div></div></li>
								<li><div class="vbox" id="stage3S166"><div class="velement">166</div><div>S<span class="sub">166</span></div></div></li>
								<li><div class="vbox" id="stage3S167"><div class="velement">167</div><div>S<span class="sub">167</span></div></div></li>
								<li><div class="vbox" id="stage3S168"><div class="velement">168</div><div>S<span class="sub">168</span></div></div></li>
								<li><div class="vbox" id="stage3S169"><div class="velement">169</div><div>S<span class="sub">169</span></div></div></li>
								<li><div class="vbox" id="stage3S170"><div class="velement">170</div><div>S<span class="sub">170</span></div></div></li>
								<li><div class="vbox" id="stage3S171"><div class="velement">171</div><div>S<span class="sub">171</span></div></div></li>
								<li><div class="vbox" id="stage3S172"><div class="velement">172</div><div>S<span class="sub">172</span></div></div></li>
								<li><div class="vbox" id="stage3S173"><div class="velement">173</div><div>S<span class="sub">173</span></div></div></li>
								<li><div class="vbox" id="stage3S174"><div class="velement">174</div><div>S<span class="sub">174</span></div></div></li>
								<li><div class="vbox" id="stage3S175"><div class="velement">175</div><div>S<span class="sub">175</span></div></div></li>
								<li><div class="vbox" id="stage3S176"><div class="velement">176</div><div>S<span class="sub">176</span></div></div></li>
								<li><div class="vbox" id="stage3S177"><div class="velement">177</div><div>S<span class="sub">177</span></div></div></li>
								<li><div class="vbox" id="stage3S178"><div class="velement">178</div><div>S<span class="sub">178</span></div></div></li>
								<li><div class="vbox" id="stage3S179"><div class="velement">179</div><div>S<span class="sub">179</span></div></div></li>
								<li><div class="vbox" id="stage3S180"><div class="velement">180</div><div>S<span class="sub">180</span></div></div></li>
								<li><div class="vbox" id="stage3S181"><div class="velement">181</div><div>S<span class="sub">181</span></div></div></li>
								<li><div class="vbox" id="stage3S182"><div class="velement">182</div><div>S<span class="sub">182</span></div></div></li>
								<li><div class="vbox" id="stage3S183"><div class="velement">183</div><div>S<span class="sub">183</span></div></div></li>
								<li><div class="vbox" id="stage3S184"><div class="velement">184</div><div>S<span class="sub">184</span></div></div></li>
								<li><div class="vbox" id="stage3S185"><div class="velement">185</div><div>S<span class="sub">185</span></div></div></li>
								<li><div class="vbox" id="stage3S186"><div class="velement">186</div><div>S<span class="sub">186</span></div></div></li>
								<li><div class="vbox" id="stage3S187"><div class="velement">187</div><div>S<span class="sub">187</span></div></div></li>
								<li><div class="vbox" id="stage3S188"><div class="velement">188</div><div>S<span class="sub">188</span></div></div></li>
								<li><div class="vbox" id="stage3S189"><div class="velement">189</div><div>S<span class="sub">189</span></div></div></li>
								<li><div class="vbox" id="stage3S190"><div class="velement">190</div><div>S<span class="sub">190</span></div></div></li>
								<li><div class="vbox" id="stage3S191"><div class="velement">191</div><div>S<span class="sub">191</span></div></div></li>
								<li><div class="vbox" id="stage3S192"><div class="velement">192</div><div>S<span class="sub">192</span></div></div></li>
								<li><div class="vbox" id="stage3S193"><div class="velement">193</div><div>S<span class="sub">193</span></div></div></li>
								<li><div class="vbox" id="stage3S194"><div class="velement">194</div><div>S<span class="sub">194</span></div></div></li>
								<li><div class="vbox" id="stage3S195"><div class="velement">195</div><div>S<span class="sub">195</span></div></div></li>
								<li><div class="vbox" id="stage3S196"><div class="velement">196</div><div>S<span class="sub">196</span></div></div></li>
								<li><div class="vbox" id="stage3S197"><div class="velement">197</div><div>S<span class="sub">197</span></div></div></li>
								<li><div class="vbox" id="stage3S198"><div class="velement">198</div><div>S<span class="sub">198</span></div></div></li>
								<li><div class="vbox" id="stage3S199"><div class="velement">199</div><div>S<span class="sub">199</span></div></div></li>
								<li><div class="vbox" id="stage3S200"><div class="velement">200</div><div>S<span class="sub">200</span></div></div></li>
								<li><div class="vbox" id="stage3S201"><div class="velement">201</div><div>S<span class="sub">201</span></div></div></li>
								<li><div class="vbox" id="stage3S202"><div class="velement">202</div><div>S<span class="sub">202</span></div></div></li>
								<li><div class="vbox" id="stage3S203"><div class="velement">203</div><div>S<span class="sub">203</span></div></div></li>
								<li><div class="vbox" id="stage3S204"><div class="velement">204</div><div>S<span class="sub">204</span></div></div></li>
								<li><div class="vbox" id="stage3S205"><div class="velement">205</div><div>S<span class="sub">205</span></div></div></li>
								<li><div class="vbox" id="stage3S206"><div class="velement">206</div><div>S<span class="sub">206</span></div></div></li>
								<li><div class="vbox" id="stage3S207"><div class="velement">207</div><div>S<span class="sub">207</span></div></div></li>
								<li><div class="vbox" id="stage3S208"><div class="velement">208</div><div>S<span class="sub">208</span></div></div></li>
								<li><div class="vbox" id="stage3S209"><div class="velement">209</div><div>S<span class="sub">209</span></div></div></li>
								<li><div class="vbox" id="stage3S210"><div class="velement">210</div><div>S<span class="sub">210</span></div></div></li>
								<li><div class="vbox" id="stage3S211"><div class="velement">211</div><div>S<span class="sub">211</span></div></div></li>
								<li><div class="vbox" id="stage3S212"><div class="velement">212</div><div>S<span class="sub">212</span></div></div></li>
								<li><div class="vbox" id="stage3S213"><div class="velement">213</div><div>S<span class="sub">213</span></div></div></li>
								<li><div class="vbox" id="stage3S214"><div class="velement">214</div><div>S<span class="sub">214</span></div></div></li>
								<li><div class="vbox" id="stage3S215"><div class="velement">215</div><div>S<span class="sub">215</span></div></div></li>
								<li><div class="vbox" id="stage3S216"><div class="velement">216</div><div>S<span class="sub">216</span></div></div></li>
								<li><div class="vbox" id="stage3S217"><div class="velement">217</div><div>S<span class="sub">217</span></div></div></li>
								<li><div class="vbox" id="stage3S218"><div class="velement">218</div><div>S<span class="sub">218</span></div></div></li>
								<li><div class="vbox" id="stage3S219"><div class="velement">219</div><div>S<span class="sub">219</span></div></div></li>
								<li><div class="vbox" id="stage3S220"><div class="velement">220</div><div>S<span class="sub">220</span></div></div></li>
								<li><div class="vbox" id="stage3S221"><div class="velement">221</div><div>S<span class="sub">221</span></div></div></li>
								<li><div class="vbox" id="stage3S222"><div class="velement">222</div><div>S<span class="sub">222</span></div></div></li>
								<li><div class="vbox" id="stage3S223"><div class="velement">223</div><div>S<span class="sub">223</span></div></div></li>
								<li><div class="vbox" id="stage3S224"><div class="velement">224</div><div>S<span class="sub">224</span></div></div></li>
								<li><div class="vbox" id="stage3S225"><div class="velement">225</div><div>S<span class="sub">225</span></div></div></li>
								<li><div class="vbox" id="stage3S226"><div class="velement">226</div><div>S<span class="sub">226</span></div></div></li>
								<li><div class="vbox" id="stage3S227"><div class="velement">227</div><div>S<span class="sub">227</span></div></div></li>
								<li><div class="vbox" id="stage3S228"><div class="velement">228</div><div>S<span class="sub">228</span></div></div></li>
								<li><div class="vbox" id="stage3S229"><div class="velement">229</div><div>S<span class="sub">229</span></div></div></li>
								<li><div class="vbox" id="stage3S230"><div class="velement">230</div><div>S<span class="sub">230</span></div></div></li>
								<li><div class="vbox" id="stage3S231"><div class="velement">231</div><div>S<span class="sub">231</span></div></div></li>
								<li><div class="vbox" id="stage3S232"><div class="velement">232</div><div>S<span class="sub">232</span></div></div></li>
								<li><div class="vbox" id="stage3S233"><div class="velement">233</div><div>S<span class="sub">233</span></div></div></li>
								<li><div class="vbox" id="stage3S234"><div class="velement">234</div><div>S<span class="sub">234</span></div></div></li>
								<li><div class="vbox" id="stage3S235"><div class="velement">235</div><div>S<span class="sub">235</span></div></div></li>
								<li><div class="vbox" id="stage3S236"><div class="velement">236</div><div>S<span class="sub">236</span></div></div></li>
								<li><div class="vbox" id="stage3S237"><div class="velement">237</div><div>S<span class="sub">237</span></div></div></li>
								<li><div class="vbox" id="stage3S238"><div class="velement">238</div><div>S<span class="sub">238</span></div></div></li>
								<li><div class="vbox" id="stage3S239"><div class="velement">239</div><div>S<span class="sub">239</span></div></div></li>
								<li><div class="vbox" id="stage3S240"><div class="velement">240</div><div>S<span class="sub">240</span></div></div></li>
								<li><div class="vbox" id="stage3S241"><div class="velement">241</div><div>S<span class="sub">241</span></div></div></li>
								<li><div class="vbox" id="stage3S242"><div class="velement">242</div><div>S<span class="sub">242</span></div></div></li>
								<li><div class="vbox" id="stage3S243"><div class="velement">243</div><div>S<span class="sub">243</span></div></div></li>
								<li><div class="vbox" id="stage3S244"><div class="velement">244</div><div>S<span class="sub">244</span></div></div></li>
								<li><div class="vbox" id="stage3S245"><div class="velement">245</div><div>S<span class="sub">245</span></div></div></li>
								<li><div class="vbox" id="stage3S246"><div class="velement">246</div><div>S<span class="sub">246</span></div></div></li>
								<li><div class="vbox" id="stage3S247"><div class="velement">247</div><div>S<span class="sub">247</span></div></div></li>
								<li><div class="vbox" id="stage3S248"><div class="velement">248</div><div>S<span class="sub">248</span></div></div></li>
								<li><div class="vbox" id="stage3S249"><div class="velement">249</div><div>S<span class="sub">249</span></div></div></li>
								<li><div class="vbox" id="stage3S250"><div class="velement">250</div><div>S<span class="sub">250</span></div></div></li>
								<li><div class="vbox" id="stage3S251"><div class="velement">251</div><div>S<span class="sub">251</span></div></div></li>
								<li><div class="vbox" id="stage3S252"><div class="velement">252</div><div>S<span class="sub">252</span></div></div></li>
							</ul> 
						</div>
						<div class="vbox" id="stage3S253"><div class="velement">253</div><div>S<span class="sub">253</span></div></div>
						<div class="vbox" id="stage3S254"><div class="velement">254</div><div>S<span class="sub">254</span></div></div>
						<div class="vbox" id="stage3S255"><div class="velement">255</div><div>S<span class="sub">255</span></div></div>
					</div>
					<div class="velement zindex2" id="swapslot1"></div>
					<div class="velement zindex2" id="swapslot2"></div>
					
					<div class="clear"> </div>
				</div>

				<div class="griditem3">
					
					<p>Initial condition: <br> 
					i, j = 0</p>

					<p>Generation of <a class="stage3counter">1</a><a id="numpostfix">st</a> pseudorandom byte:</p>
					<h3>Step 1:</h3>
					<p class="stage3step1">i = (<a id="ivalue1">i</a> + 1) mod 256 </p>
					<p class="stage3step2">i = <a id="ivalue2">0</a> </p>
				</div>

				<div class="griditem4">
					<p class="stage3step3">j = (<a id="jvalue1">j</a> + S[<a id="ivalue3">i</a>]) mod 256  </p>
					<p class="stage3step4">j = (<a id="jvalue2">0</a> + <a id="sivalue1">1</a>) mod 256  </p>
					<p class="stage3step5">j = <a id="jvalue3">0</a> </p>

					<h3>Step 2:</h3>
					<p id="stage3step67">
						<span class="stage3step6">S[<a id="ivalue4">i</a>] = <a id="sivalue2"></a>, </span> 
						<span class="stage3step7">S[<a id="jvalue4">j</a>]= <a id="sjvalue1"></a></span> 
					</p>
					<p id="stage3step8to11"> Swap S[i], S[j] </p>
					<div id="stage3step7scrolltosi"></div>
					<div class="stage3step8"></div>
					<div id="stage3step8scrolltosj"></div>
					<div class="stage3step9"></div>
					<div class="stage3step10"></div>
					<div id="stage3step10scrolltosi"></div>
					<div class="stage3step11"></div>
					<p id="stage3step1213">
						<span class="stage3step12">S[<a id="ivalue5">i</a>] = <a id="sivalue3"></a>, 
						<span class="stage3step13"> S[<a id="jvalue5">j</a>]= <a id="sjvalue2"></a></span> 
					</p>

				</div>

				<div class="griditem5">
					<h3>Step 3:</h3>

					<p id="stage3step1415">n = (S[<a id="ivalue6">i</a>] + S[<a id="jvalue6">j</a>]) mod 256 </p>
					<div class="stage3step14"></div>
					<div class="stage3step15"></div>

					<p class="stage3step16">n = (<a id="sivalue4">x</a> + <a id="sjvalue3">y</a>) mod 256 </p>
					<p class="stage3step17">n = <a id="nvalue1"></a> </p>
					<p class="stage3step18">byte-key = S[n] = S[<a id="nvalue2">n</a>] </p>
					<p class="stage3step19">byte-key = <a id="snvalue1">0</a> = (<a id="snvaluebinary">0</a>)<a class="sub">2</a>	</p>
				</div>

				<div class="griditem6">
					<h3>Stream of Random Bytes Generated:</h3>
					<p id="randomkeys">NIL</p>
				</div>

				<div class="blankspace"></div>

				<script>		
					var numpostfix = document.getElementById("numpostfix");
					var stage3counter = document.getElementsByClassName("stage3counter")[0];
					var stage3step1 = document.getElementsByClassName("stage3step1")[0];
					var stage3step2 = document.getElementsByClassName("stage3step2")[0];
					var stage3step3 = document.getElementsByClassName("stage3step3")[0];
					var stage3step4 = document.getElementsByClassName("stage3step4")[0];
					var stage3step5 = document.getElementsByClassName("stage3step5")[0];
					var stage3step6 = document.getElementsByClassName("stage3step6")[0];
					var stage3step7 = document.getElementsByClassName("stage3step7")[0];
					var stage3step8 = document.getElementsByClassName("stage3step8")[0];
					var stage3step9 = document.getElementsByClassName("stage3step9")[0];
					var stage3step10 = document.getElementsByClassName("stage3step10")[0];
					var stage3step11 = document.getElementsByClassName("stage3step11")[0];
					var stage3step12 = document.getElementsByClassName("stage3step12")[0];
					var stage3step13 = document.getElementsByClassName("stage3step13")[0];
					var stage3step14 = document.getElementsByClassName("stage3step14")[0];
					var stage3step15 = document.getElementsByClassName("stage3step15")[0];
					var stage3step16 = document.getElementsByClassName("stage3step16")[0];
					var stage3step17 = document.getElementsByClassName("stage3step17")[0];
					var stage3step18 = document.getElementsByClassName("stage3step18")[0];
					var stage3step19 = document.getElementsByClassName("stage3step19")[0];

					var stage3step7scrolltosi = document.getElementById("stage3step7scrolltosi");
					var stage3step8scrolltosj = document.getElementById("stage3step8scrolltosj");
					var stage3step10scrolltosi = document.getElementById("stage3step10scrolltosi");

					var stage3items = [stage3counter, stage3step1, stage3step2, stage3step3, stage3step4, stage3step5, stage3step6, stage3step7, stage3step7scrolltosi, stage3step8, stage3step8scrolltosj, stage3step9, stage3step10, stage3step10scrolltosi, stage3step11, stage3step12, stage3step13, stage3step14, stage3step15, stage3step16, stage3step17, stage3step18, stage3step19];
					var stage3anims = ["stage2counteranim", "stage2highlight1s", "stage2highlight1s", "stage2highlight2s", "stage2highlight2s", "placeholder2s"];

					var section3 = document.getElementById("section3");
					var toggle = document.getElementById("stage3toggle");
					var forward = document.getElementById("stage3forth");
					var backward = document.getElementById("stage3back");
					var stage3autoplay = false;
					var stage3roundcount = parseInt(stage3counter.textContent); 
					var stage3stepcount = 0;  // step 1 to 4, back and forth
					var itracker = 0;
					var randomkeys = document.getElementById("randomkeys");

					var stage3step67 = document.getElementById("stage3step67");
					var stage3step8to11 = document.getElementById("stage3step8to11");
					var stage3step1213 = document.getElementById("stage3step1213");
					var stage3step1415 = document.getElementById("stage3step1415");

					var swapslot1 = section3.querySelector("#swapslot1") ;
					var swapslot2 = section3.querySelector("#swapslot2") ;
					var	elementsi = section3.querySelector("#stage3S0").firstChild;     
					var	elementsj = section3.querySelector("#stage3S1").firstChild;	
					var	sivalue = parseInt(elementsi.textContent);  
					var	sjvalue = parseInt(elementsj.textContent);  
					var sileft = $("#stage3S0").first().offset().left;            
					var sjleft = $("#stage3S1").first().offset().left; 
					var stage3S6offset = $("#stage3S6").first().offset().left;
					var S248offset = $("#stage3S248").first().offset().left;
					var tempdistance = 0; 
					var stage3step8started = false;
					var step8anim = stage3step9slot2();
					var stage3step9started = false;
					var step9anim = stage3step9slot2();
					var stage3step10started = false;
					var step10anim = stage3step9slot2();
					var stage3step11started = false;
					var step11anim = stage3step9slot2();

					var stage3recordsi = [];
					var stage3recordsj = [];

					function stage3recordswap(siindex, sjindex){
						var lastsi = stage3recordsi[stage3recordsi.length - 1];
						var lastsj = stage3recordsj[stage3recordsj.length - 1];
						if( lastsi == siindex && lastsj ==  sjindex) { return; }
						stage3recordsi.push(siindex);
						stage3recordsj.push(sjindex);
						//document.getElementById("test1").innerHTML = stage3recordsi;
						//document.getElementById("test2").innerHTML = stage3recordsj;
					}

					function stage3counterpostfix(){
						var count = stage3counter.textContent.toString();
						var lastdigit = parseInt(count[count.length - 1]);
						switch(lastdigit){
							case 1: numpostfix.innerHTML = "st"; break;
							case 2: numpostfix.innerHTML = "nd"; break;
							case 3: numpostfix.innerHTML = "rd"; break;
							default: numpostfix.innerHTML = "th"; 
						}
					}

					function stage3step1i1(){
						var ivalue1 = parseInt(section3.querySelector("#ivalue1").textContent);
						$("#section3 #ivalue1").prop('number', ivalue1);  
						$("#section3 #ivalue1").animateNumber( { number: itracker }, 'linear' );
					}

					function stage3step2i2(){
						var ivalue2 = parseInt(section3.querySelector("#ivalue2").textContent);
						var temp = ( itracker + 1 ) % 256 ;
						if(ivalue2 > 0 ){ $("#section3 #ivalue2").prop('number', ivalue2); }
						else{ $("#section3 #ivalue2").prop('number', temp); }
						$("#section3 #ivalue2").animateNumber( { number: temp }, 'linear' );
					}

					function animonce(element, playanim){
						stage2addanim(true, element, playanim);
						stage2lineanimrunning(true, element);
						element.addEventListener(
							"webkitAnimationEnd", 
							function(){
								if (element.classList.contains(playanim)){ element.classList.remove(playanim);}
							} );	
						};

					function stage3hscrollto(sindex, duration, callbacktype, callbackname){  // animclassname or false
						var defaultSoffset = $("#stage3S6").offset().left;
						var elementoffset = $("#section3 #stage3S" + sindex).offset().left ;
						var element = section3.querySelector("#stage3S" + sindex ).firstChild ;
						if( callbacktype == 0 ){
							$("#section3 #hscrollS").animate({ scrollLeft:(elementoffset - defaultSoffset) }, duration);
						}
						else if ( callbacktype == 1 ) {
							$("#section3 #hscrollS").animate({ scrollLeft:(elementoffset - defaultSoffset) }, duration, animonce(element, callbackname));
						}
						else if ( callbacktype == 2 ) {
							$("#section3 #hscrollS").animate({ scrollLeft:(elementoffset - defaultSoffset) }, duration, function(){callbackname();});
						}
					}

					function stage3step3j1(){ 
						var jvalue1 = parseInt(section3.querySelector("#jvalue1").textContent);
						var jvalue3 = parseInt(section3.querySelector("#jvalue3").textContent);
						if( stage3roundcount == 1){ jvalue1 = jvalue3 = 0;}					
						$("#section3 #jvalue1").prop('number', jvalue1); 
						$("#section3 #jvalue1").animateNumber( { number: jvalue3 }, 'linear',stage3step3i3() );

						function stage3step3i3(){
							var ivalue2 = parseInt(section3.querySelector("#ivalue2").textContent);
							if(stage3roundcount > 0 ){ $("#section3 #ivalue3").prop('number', ivalue2-1);  } 
							$("#section3 #ivalue3").animateNumber( { number: ivalue2 }, 'linear' );
							stage3hscrollto(ivalue2, 400, 1, "vectorredfast");
						}
					}

					function stage3step4j2(){
						var newjvalue2 = parseInt(section3.querySelector("#jvalue1").textContent);
						var jvalue2 = parseInt(section3.querySelector("#jvalue2").textContent);
						$("#section3 #jvalue2").prop('number', jvalue2); 
						$("#section3 #jvalue2").animateNumber( { number: newjvalue2 }, 'linear',stage3step4si1() );

						function stage3step4si1(){
							var ivalue2 = parseInt(section3.querySelector("#ivalue2").textContent);
							var sivalue1 = parseInt(section3.querySelector("#stage3S" + ivalue2).firstChild.textContent);
							$("#section3 #sivalue1").prop('number', sivalue1 );  
							$("#section3 #sivalue1").animateNumber( { number: sivalue1 }, 'linear' );
						}
					}

					function stage3step5j3(){
						var jvalue2 = parseInt(section3.querySelector("#jvalue1").textContent);
						var sivalue1 = parseInt(section3.querySelector("#sivalue1").textContent);
						var temp = ( jvalue2 + sivalue1) % 256 ;
						$("#section3 #jvalue3").prop('number', temp); 
						$("#section3 #jvalue3").animateNumber( { number: temp }, 'linear');
					}

					function stage3step6i4(){
						stage3step67.style.color = "#0073e6";
						stage3step67.style.fontWeight = "bold";
						var ivalue4 = parseInt(section3.querySelector("#ivalue4").textContent);
						var newivalue4 = parseInt(section3.querySelector("#ivalue2").textContent);
						var sivalue2 = parseInt(section3.querySelector("#stage3S" + newivalue4).firstChild.textContent);
						$("#section3 #ivalue4").prop('number', ivalue4); 
						$("#section3 #ivalue4").animateNumber( { number: newivalue4 }, 'linear', function(){stage3hscrollto(newivalue4, 400, 1, "vectorredfast");});
						$("#section3 #sivalue2").prop('number', sivalue2); 
						$("#section3 #sivalue2").animateNumber( { number: sivalue2 }, 'linear');
					}

					function stage3step7j4(){
						var jvalue4 = parseInt(section3.querySelector("#jvalue4").textContent);
						var newjvalue4 = parseInt(section3.querySelector("#jvalue3").textContent);
						var sjvalue1 = parseInt(section3.querySelector("#stage3S" + newjvalue4).firstChild.textContent);
						$("#section3 #jvalue4").prop('number', jvalue4); 
						$("#section3 #jvalue4").animateNumber( { number: newjvalue4 }, 'linear',function(){stage3hscrollto(newjvalue4, 400, 1, "vectorredfast");});
						$("#section3 #sjvalue1").prop('number', sjvalue1); 
						$("#section3 #sjvalue1").animateNumber( { number: sjvalue1 }, 'linear');

						stage3step7.addEventListener("webkitAnimationEnd", function(){
								stage3step67.style.color = "black";
								stage3step67.style.fontWeight = "normal";
						}, true);
					}

					function stage3step12i5(){
						stage3step1213.style.color = "#0073e6";
						stage3step1213.style.fontWeight = "bold";
						var ivalue5 = parseInt(section3.querySelector("#ivalue5").textContent);
						var newivalue5 = parseInt(section3.querySelector("#ivalue2").textContent);
						var sivalue3 = parseInt(section3.querySelector("#stage3S" + newivalue5).firstChild.textContent);
						$("#section3 #ivalue5").prop('number', ivalue5); 
						$("#section3 #ivalue5").animateNumber( { number: newivalue5 }, 'linear', function(){stage3hscrollto(newivalue5, 400, 1, "vectorredfast");});
						$("#section3 #sivalue3").prop('number', sivalue3); 
						$("#section3 #sivalue3").animateNumber( { number: sivalue3 }, 'linear');
					}

					function stage3step13j5(){
						var jvalue5 = parseInt(section3.querySelector("#jvalue5").textContent);
						var newjvalue5 = parseInt(section3.querySelector("#jvalue3").textContent);
						var sjvalue2 = parseInt(section3.querySelector("#stage3S" + newjvalue5).firstChild.textContent);
						$("#section3 #jvalue5").prop('number', jvalue5); 
						$("#section3 #jvalue5").animateNumber( { number: newjvalue5 }, 'linear',function(){stage3hscrollto(newjvalue5, 400, 1, "vectorredfast");});
						$("#section3 #sjvalue2").prop('number', sjvalue2); 
						$("#section3 #sjvalue2").animateNumber( { number: sjvalue2 }, 'linear');

						stage3step13.addEventListener("webkitAnimationEnd", function(){
								stage3step1213.style.color = "black";
								stage3step1213.style.fontWeight = "normal";
						}, true);
					}

					function stage3step14i6(){
						stage3step1415.style.color = "#0073e6";
						stage3step1415.style.fontWeight = "bold";
						var ivalue6 = parseInt(section3.querySelector("#ivalue6").textContent);
						var newivalue6 = parseInt(section3.querySelector("#ivalue2").textContent);
						var sivalue4 = parseInt(section3.querySelector("#stage3S" + newivalue6).firstChild.textContent);
						$("#section3 #ivalue6").prop('number', ivalue6); 
						$("#section3 #ivalue6").animateNumber( { number: newivalue6 }, 'linear', function(){stage3hscrollto(newivalue6, 400, 1, "vectorredfast");});
						$("#section3 #sivalue4").prop('number', sivalue4); 
						$("#section3 #sivalue4").animateNumber( { number: sivalue4 }, 'linear');
					}

					function stage3step15j6(){
						var jvalue6 = parseInt(section3.querySelector("#jvalue6").textContent);
						var newjvalue6 = parseInt(section3.querySelector("#jvalue3").textContent);
						var sjvalue3 = parseInt(section3.querySelector("#stage3S" + newjvalue6).firstChild.textContent);
						$("#section3 #jvalue6").prop('number', jvalue6); 5
						$("#section3 #jvalue6").animateNumber( { number: newjvalue6 }, 'linear',function(){stage3hscrollto(newjvalue6, 400, 1, "vectorredfast");});
						$("#section3 #sjvalue1").prop('number', sjvalue3); 
						$("#section3 #sjvalue1").animateNumber( { number: sjvalue3 }, 'linear');

						stage3step15.addEventListener("webkitAnimationEnd", function(){
								stage3step1415.style.color = "black";
								stage3step1415.style.fontWeight = "normal";
						}, true);
					}

					function stage3step16sisj(){
						var sivalue4 = parseInt(section3.querySelector("#sivalue3").textContent);
						var sjvalue3 = parseInt(section3.querySelector("#sjvalue2").textContent);
						$("#section3 #sivalue4").prop('number', sivalue4); 
						$("#section3 #sivalue4").animateNumber( { number: sivalue4 }, 'linear');
						$("#section3 #sjvalue3").prop('number', sjvalue3); 
						$("#section3 #sjvalue3").animateNumber( { number: sjvalue3 }, 'linear');
					}

					function stage3step17xy(){
						var sivalue4 = parseInt(section3.querySelector("#sivalue3").textContent);
						var sjvalue3 = parseInt(section3.querySelector("#sjvalue2").textContent);
						var nvalue1 = parseInt(section3.querySelector("#nvalue1").textContent);
						var temp = ( sivalue4 + sjvalue3 ) % 256;
						$("#section3 #nvalue1").prop('number', nvalue1); 
						$("#section3 #nvalue1").animateNumber( { number: temp }, 'linear');
					}

					function stage3step18n(){
						var nvalue1 = parseInt(section3.querySelector("#nvalue1").textContent);
						$("#section3 #nvalue2").prop('number', nvalue1); 
						$("#section3 #nvalue2").animateNumber( { number: nvalue1 }, 'linear',
							function(){stage3hscrollto(nvalue1, 400, 1, "vectorredfast")});
					}

					function stage3step19sn(){
						var prefix0 = "";
						var nvalue1 = parseInt(section3.querySelector("#nvalue1").textContent);
						var snvalue1 = parseInt(section3.querySelector("#stage3S" + nvalue1).firstChild.textContent);
						$("#section3 #snvalue1").prop('number', snvalue1); 
						$("#section3 #snvalue1").animateNumber( { number: snvalue1 }, 'linear');
						var bkey = snvalue1.toString(2);
						for( i=0; i< (8 - bkey.length) ; i++){
							prefix0 = prefix0 + "0" ;
						}
						var bkey = prefix0 + bkey;
						document.getElementById("snvaluebinary").innerHTML = bkey;
						var randomkeystr = randomkeys.textContent;
						if(randomkeystr == "NIL" ){randomkeystr = "";}
						var randomkeystr = randomkeystr + "  " + bkey;
						randomkeys.innerHTML = randomkeystr;
					}

					function stage3addanim(add, itemx, animx){
						if(add && (!itemx.classList.contains(animx) )) { 
							itemx.classList.add(animx); 
						}
						else if ((!add) && itemx.classList.contains(animx) ) { 
								itemx.classList.remove(animx); 
								stage3stepincre();
						}
					}

					function stage3stepincre(){ 
						stage3stepcount = stage3stepcount + 1; 
						stage3animation(); 
					}

					function stage3checkanimend(itemx, animx){ itemx.addEventListener("webkitAnimationEnd", function(){
						stage3addanim(false, itemx, animx); 
						stage2lineanimrunning(false, itemx);
					}, true); }
 


					function stage3scrolltosi(){
						var sielindex = parseInt(section3.querySelector("#ivalue2").textContent);
						stage3hscrollto(sielindex, 900, 0, "");
					}
					       
					function stage3step8slot1(){
						stage3step8to11.style.color = "#0073e6";
						stage3step8to11.style.fontWeight = "bold";
						var ivalue2 = parseInt(section3.querySelector("#ivalue2").textContent);
						var siid = "stage3S" + ivalue2;  
						var jvalue3 = parseInt(section3.querySelector("#jvalue3").textContent);
						var	sjid = "stage3S" + jvalue3;
						elementsi = section3.querySelector("#" + siid).firstChild;     
						elementsj = section3.querySelector("#" + sjid).firstChild;	      
						sivalue = parseInt(elementsi.textContent);                
						sileft = $("#" + siid).first().offset().left;            
						sjleft = $("#" + sjid).first().offset().left; 
						tempdistance = 0; 
						$("#section3 #swapslot1").offset({ left:sileft + 5 });
						var swapslot1left = $("#section3 #swapslot1").offset().left;
						
						if ( ivalue2 <= 7 ) {
							$("#section3 #swapslot1").offset({ left:sileft + 5 });
							tempdistance = stage3S6offset - sileft ;
							if ( jvalue3 <= 7 ) {
								tempdistance = sjleft - sileft ;
							}
							else if ( jvalue3 >= 249) {
								tempdistance = (stage3S6offset - sileft ) + (jvalue3 - 249) * 40 + 15 ; 
								}
						}

						else if ( ivalue2 >= 249 ) {
							$("#section3 #swapslot1").offset({ left:sileft + 3 });
							tempdistance = stage3S6offset - sileft ;
							if ( jvalue3 <= 7 ) {
								tempdistance = sjleft - sileft ;
							}
							else if ( jvalue3 >= 249) {
								tempdistance = (stage3S6offset - sileft ) + (jvalue3 - 249) * 40 + 15 ; 
								}
							}

						else if (jvalue3 <= 7 ) {
							tempdistance = sjleft - sileft ;
						}
						else if ( jvalue3 >= 249) {
								tempdistance =  (jvalue3 - 249) * 40 + 15 ; 
								}

						//alert("ivalue2 is called, stage3S7offset = " + stage3S7offset + "; sileft = " + sileft + "; sjleft = " + sjleft );						

						swapslot1.innerHTML = sivalue;
						var swapslot1anim1 = swapslot1.animate( [
								{
									transform:"translateY(0px) translateX(0px)"
								},
								{
									transform:"translateY(0px) translateX(0px)"
								},
								{
									transform:"translateY(-50px) translateX(0px)"
								}, {
									transform:"translateY(-50px) translateX("  +  tempdistance  + "px)"
								}], {
									duration: 900,
									direction: "normal",
									fill: "forwards",
									easing:"linear"
								}
							);
						swapslot1anim1.pause();		
						return swapslot1anim1;						
					}

					function stage3scrolltosj(){
						var jvalue3 = parseInt(section3.querySelector("#jvalue3").textContent);
						stage3hscrollto(jvalue3, 900, 0, "");
					}

					function stage3step9slot2(){
						var jvalue3 = parseInt(section3.querySelector("#jvalue3").textContent);
						var	sjid = "stage3S" + jvalue3;    
						elementsj = section3.querySelector("#" + sjid).firstChild;	               
						sjvalue = parseInt(elementsj.textContent);           
						sjleft = $("#" + sjid).first().offset().left;
						var swapslot2left = $("#section3 #swapslot2").offset().left;

						$("#section3 #swapslot2").offset({left: sjleft + 5 });
						swapslot2.innerHTML = sjvalue;
						var swapslot2anim1 = swapslot2.animate(
								[{
									transform:"translateY(0px) translateX(0px)"
								}, {
									transform:"translateY(0px) translateX(0px)"
								}, {
									transform:"translateY(50px) translateX(0px)"
								}, {
									transform:"translateY(50px) translateX(40px)"
								}],{
									duration: 800,
									direction:"normal",
									fill:"forwards",
									easing:"linear"
								});						
						swapslot2anim1.pause();

						return swapslot2anim1;
					}

					function stage3step10slot1(){
						var swapslot1anim2 = swapslot1.animate(
							[ {
								transform: "translateY(-50px) translateX("  +  tempdistance   + "px)"
							},{
								transform: "translateY(-50px) translateX("  +  tempdistance   + "px)"
							},{
								transform: "translateY(0px) translateX("  +  tempdistance   + "px)"
							} ], {
								duration: 800,
								fill:"forwards"
							});
						swapslot1anim2.pause();

						swapslot1anim2.addEventListener("finish", function(){
									elementsj.innerHTML = sivalue;
									elementsj.style.opacity = "1";
									swapslot1.style.opacity = "0";
									$("#section3 .hscrollS").first().animate(
									{ scrollLeft:( sileft - stage3S6offset) 
									}, 
									500);} )

						return swapslot1anim2;
					}

					function stage3step11slot2(){
						swapslot2left = $("#section3 #swapslot2").offset().left;
						var temp2 = sileft - swapslot2left + 3 + 39 ; 
						var swapslot2anim2 = swapslot2.animate(
							[ {
								transform: "translateY(50px) translateX(40px)"
							},{
								transform: "translateY(50px) translateX(40px)"
							},{
								transform: "translateY(50px) translateX("+ temp2 +"px)"
							},{
								transform: "translateY(0px) translateX("+ temp2 +"px)"
							}],{
								duration: 900,
								fill:"forwards"
							}
						);
						swapslot2anim2.pause();
						swapslot2anim2.addEventListener("finish", 
							function(){
								elementsi.innerHTML = sjvalue;
								elementsi.style.opacity = "1";
								swapslot2.style.opacity = "0";	
								var endanim1 = swapslot1.animate([{
										transform: " translateX("  +  tempdistance   + "px)"
									}, {
										transform: " translateX(0px)"
									}],{
										duration: 100,
										fill:"forwards"
									});
								var endanim2 = swapslot2.animate([{
										transform: " translateX("  +  temp2   + "px)"
									}, {
										transform: " translateX(0px)"
									}],{
										duration: 100,
										fill:"forwards"
									});

								endanim1.addEventListener('finish', function(){
									stage3step8to11.style.color = "black";
									stage3step8to11.style.fontWeight = "normal";
								})			
							} );


						return swapslot2anim2;
					}

					function stage3animation(){    // loop, pause/run the animation
						if ( stage3stepcount >= 23 ){ 
							stage3stepcount = 0;  
							itracker += 1;
							stage3roundcount += 1;
							stage3counter.innerHTML = stage3roundcount;
						}
						var playitem = stage3items[stage3stepcount];
						if(stage3autoplay) {							
							if ( stage3stepcount <= 3) { var playanim = stage3anims[stage3stepcount];}
							else if ( stage3stepcount >= 6 && stage3stepcount <= 7 ) { var playanim = "placeholder2s";} 
							else if ( stage3stepcount >= 8 && stage3stepcount <= 14 ) { var playanim = "placeholder1s";} 
							else if ( stage3stepcount >= 15 && stage3stepcount <= 18 ) { var playanim = "placeholder2s";} 
							else if ( stage3stepcount >= 21 ) { var playanim = "stage2highlight2s";}
							else {	var playanim = stage3anims[1];	}
							stage3addanim(true, playitem, playanim);   
							stage2lineanimrunning(true, playitem);    
							
							switch(stage3stepcount){
								case 0: stage3counterpostfix(); break;
								case 1: stage3step1i1(); break;
								case 2: stage3step2i2(); break;
								case 3: stage3step3j1(); break;
								case 4: stage3step4j2(); break;
								case 5: stage3step5j3(); break;
								case 6: stage3step6i4(); break;
								case 7: stage3step7j4(); 
										break;
								case 8: stage3scrolltosi(); break;
								case 9: if ( !stage3step8started ){
											step8anim = stage3step8slot1(); 
											elementsi.style.opacity = "0";
											swapslot1.style.opacity = "1";
											step8anim.play(); 
											stage3step8started = true;
										} 
										else { step8anim.play(); }
										break;
								case 10: stage3scrolltosj(); break;
								case 11:  stage3step8started = false; 
										if ( !stage3step9started ){
											step9anim = stage3step9slot2();
											elementsj.style.opacity = "0";
											swapslot2.style.opacity = "1";
											step9anim.play();
											stage3step9started = true;
										} 
										else { step9anim.play(); }
										break;
								case 12: stage3step9started = false; 
										if ( !stage3step10started ){
											step10anim = stage3step10slot1();
											step10anim.play();
											stage3step10started = true;
										} 
										else { step10anim.play(); }
										break;
								case 13:  stage3scrolltosi(); break;
								case 14:  stage3step10started = false; 
										if ( !stage3step11started ){
											step11anim = stage3step11slot2();
											step11anim.play();
											stage3step11started = true;
										} 
										else { step11anim.play(); }
										break;
								case 15: stage3step11started = false; stage3step12i5();
											break;
								case 16: stage3step13j5(); break;
								case 17: stage3step14i6(); break;
								case 18: stage3step15j6(); break;
								case 19: stage3step16sisj(); break;
								case 20: stage3step17xy(); break;
								case 21: stage3step18n(); break;
								case 22: stage3step19sn(); break;
								default: break;
							}
							
							//------
							// remove anim, move to next step
							stage3checkanimend(playitem, playanim);  
						}
						else {
							stage2lineanimrunning(false, playitem);

							function vectorredpause(ivalue, animname){
								var siindex = parseInt(section3.querySelector("#" + ivalue).textContent);
								var elementSi = document.getElementById( "stage3S"+siindex ).firstChild;
								if( elementSi.classList.contains(animname) ){
									stage2lineanimrunning(false, elementSi);	
									}
							}

							if(stage3stepcount == 3){
								vectorredpause("ivalue2", "vectorredfast"); }
							else if(stage3stepcount == 6){
								vectorredpause("ivalue4", "vectorredfast");
							}
							else if(stage3stepcount == 7){
								vectorredpause("jvalue4", "vectorredfast");
							}
							else if(stage3stepcount == 9){
								 step8anim.pause();
							}
							else if(stage3stepcount == 11){
								 step9anim.pause();
							}
							else if(stage3stepcount == 12){
								 step10anim.pause();
							}
							else if(stage3stepcount == 14){
								 step11anim.pause();
							}
							else if(stage3stepcount == 15){
								vectorredpause("ivalue5", "vectorredfast");
							}
							else if(stage3stepcount == 16){
								vectorredpause("jvalue5", "vectorredfast");
							}
							else if(stage3stepcount == 17){
								vectorredpause("ivalue6", "vectorredfast");
							}
							else if(stage3stepcount == 18){
								vectorredpause("jvalue6", "vectorredfast");
							}
							else if(stage3stepcount == 21){
								vectorredpause("nvalue2", "vectorredfast"); }
						}
					}

					function toggleanimation() {	// respond to user pause/play the animation

						if (!stage3autoplay){ 							
							toggle.innerHTML = "PAUSE"; 
							stage3autoplay = true;
							stage3animation();
							}
							
						else if (stage3autoplay){
							toggle.innerHTML = "PLAY";
							stage3autoplay = false;
							stage3animation();	
							}
					}

					function stage3forward(){
						elementsi.style.opacity = "1";     
						elementsj.style.opacity = "1";    
						stage3updateS();
						var targetround = parseInt(stage3counter.textContent) ;
						var tempi1 = 0;
						var tempi2 = 0;
						var tempj1 = 0;
						var tempj2 = 0;
						var temprandomkeys = "";
						stage3recordsi = [];
						stage3recordsj = [];

						for( i=0; i< 256; i++ ){
							tempi2 = tempi1 + 1;
							var sivalue = parseInt(document.getElementById("stage3S"+tempi2).firstChild.textContent);
							tempj2 = ( tempj1 + sivalue ) % 256 ;
							var siel = document.getElementById("stage3S"+tempi2).firstChild;
							var sjel = document.getElementById("stage3S"+tempj2).firstChild;
							var sielvalue = parseInt(siel.textContent);
							var sjelvalue = parseInt(sjel.textContent);

							if( tempi2 != tempj2 ){ swapElements(siel, sjel); }
							stage3recordswap(tempi2, tempj2);

							var nvalue = ( sielvalue + sjelvalue ) % 256 ;
							var snelvalue = parseInt(section3.querySelector("#stage3S" + nvalue).firstChild.textContent);
							var snelvaluebinary = snelvalue.toString(2);
							var prefix0 = "";
							for( j=0; j< (8 - snelvaluebinary.length) ; j++){
								prefix0 = prefix0 + "0" ;
							}
							var snelvaluebinary8 = prefix0 + snelvaluebinary;
							temprandomkeys = temprandomkeys + " " + snelvaluebinary8;

							if( i ==  targetround){
								stage3autoplay = false;
								stage3counter.innerHTML = targetround + 1;
								stage3counterpostfix();
								stage3roundcount = targetround + 1; 
								stage3stepcount = 23;
								itracker = targetround ;

								section3.querySelector("#ivalue1").innerHTML = tempi1;
								section3.querySelector("#ivalue2").innerHTML = tempi2;
								section3.querySelector("#ivalue3").innerHTML = tempi2;
								section3.querySelector("#ivalue4").innerHTML = tempi2;
								section3.querySelector("#ivalue5").innerHTML = tempi2;
								section3.querySelector("#ivalue6").innerHTML = tempi2; 

								section3.querySelector("#jvalue1").innerHTML = tempj1;
								section3.querySelector("#jvalue2").innerHTML = tempj1;	
								section3.querySelector("#jvalue3").innerHTML = tempj2;
								section3.querySelector("#jvalue4").innerHTML = tempj2;
								section3.querySelector("#jvalue5").innerHTML = tempj2;
								section3.querySelector("#jvalue6").innerHTML = tempj2;

								section3.querySelector("#sivalue1").innerHTML = sielvalue;
								section3.querySelector("#sivalue2").innerHTML = sielvalue;
								section3.querySelector("#sjvalue1").innerHTML = sjelvalue;
								section3.querySelector("#sivalue3").innerHTML = sjelvalue;
								section3.querySelector("#sjvalue2").innerHTML = sielvalue;
								section3.querySelector("#sivalue4").innerHTML = sjelvalue;
								section3.querySelector("#sjvalue3").innerHTML = sielvalue;

								section3.querySelector("#nvalue1").innerHTML = nvalue;
								section3.querySelector("#nvalue2").innerHTML = nvalue;
								section3.querySelector("#snvalue1").innerHTML = snelvalue;
								section3.querySelector("#snvaluebinary").innerHTML = snelvaluebinary8;
								randomkeys.innerHTML = temprandomkeys;
								break;
							}													
							tempj1 = tempj2;
							tempi1 = tempi2;
						};
					
					}						
					
					function stage3backward(){
						var targetstage3counter = parseInt(stage3counter.textContent) - 2;
						if ( targetstage3counter <0 ) { 
							alert("This is the start of stream generation.");
							return; }
						randomkeys.innerHTML = "";
						stage3counter.innerHTML = targetstage3counter ;
						stage3forward();
					}

					toggle.addEventListener("click", function(){toggleanimation()}, false);
					forward.addEventListener("click", function(){stage3forward()}, false);
					backward.addEventListener("click", function(){stage3backward()}, false);


					var stage1box = document.getElementsByClassName("flowbox")[0];
					var stage2box = document.getElementsByClassName("flowbox")[1];
					var stage3box = document.getElementsByClassName("flowbox")[2];
					var section1 = document.getElementById("section1");
					var section2 = document.getElementById("section2");
					var section3 = document.getElementById("section3");

					function gotosectionx(stagenum){
						switch( stagenum ){
							case 1: section1.scrollIntoView(false); break;
							case 2: section2.scrollIntoView(false); break;
							case 3: section3.scrollIntoView(false); break;
						}
					}
					stage1box.addEventListener("click", function(){gotosectionx(1)} );
					stage2box.addEventListener("click", function(){gotosectionx(2)} );
					stage3box.addEventListener("click", function(){gotosectionx(3)} );



				</script>
				

				
			</div>

			

		</div>



	</body>	


</html>


